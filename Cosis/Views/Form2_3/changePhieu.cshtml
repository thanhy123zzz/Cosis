@model Cosis.Models.PhieuDieuTra
@{
    FormCosisContext context = new FormCosisContext();
    TinhTp getTinh(string idTinh)
    {
        return context.TinhTp.Find(idTinh);
    }

    QuanHuyen getHuyen(string idHuyen)
    {
        return context.QuanHuyen.Find(idHuyen);
    }

    PhuongXa getXa(string idXa)
    {
        return context.PhuongXa.Find(idXa);
    }
    int getThang()
    {
        return DateTime.Now.Month;
    }
    string getThangTruoc(string m)
    {
        int i = Int32.Parse(m);
        if (i == 1)
        {
            return "12";
        }
        else
        {
            return toStringMonth(i - 1);
        }
    }
    int getNam()
    {
        return DateTime.Now.Year;
    }
    string getThangNamTruoc()
    {
        if (getThang() == 1)
            return "12/" + (getNam() - 1);
        else
        {
            return (getThang() - 1) + "/" + getNam();
        }
    }
    List<Master> getMasters()
    {
        return context.Master.ToList();
    }

    string toStringMonth(int i)
    {
        if (i.ToString().Length > 1) return i.ToString();
        else return "0" + i;
    }

    string toStringMonthAndYear(int m, int year)
    {
        if (m == 1)
        {
            return 12 + "/" + (year - 1).ToString();
        }
        else
        {
            return toStringMonth(m - 1) + "/" + year;
        }
    }
    List<NganhKinhDoanh> getNganhKinhDoanh(string mcs)
    {
        return context.NganhKinhDoanh.Where(x => x.MaCoSo == mcs).ToList();
    }

    NganhHoatDongKinhDoanh getNganhHoatDongKinhDoanh(string ma)
    {
        return context.NganhHoatDongKinhDoanh.Where(x => x.MaNganh == ma).FirstOrDefault();
    }
    string getArray()
    {
        if (Model.DanhSachNhanToAnhHuong != null)
        {
            string a = "";
            foreach (DanhSachNhanToAnhHuong l in Model.DanhSachNhanToAnhHuong)
            {
                a = a + "'" + l.MaAh.Trim() + "', ";
            }
            return a;
        }
        else
        {
            return "";
        }

    }
    List<NganhKinhDoanh> list;
    
}
@using Cosis.Models



<form id="form" action="/form2_3" method="post" enctype="multipart/form-data">
              <div class="choose-day row">
          <div class="choose-month">
            <label for="">Tháng</label>
            <select name="thangDuTinh" id="phieuThang" onchange="doiPhieu('@Model.Master.MaCoSo')">
                @for (int i = 1; i <= 12; i++)
                {
                    @if (Int32.Parse(ViewBag.thang) == i)
                    {
                                          <option selected value="@toStringMonth(i)">@toStringMonth(i)</option>
                    }
                    else
                    {
                                          <option value="@toStringMonth(i)">@toStringMonth(i)</option>
                    }
                }
            </select>
            <input type="hidden" name="thangThucHien" value="@getThangTruoc(ViewBag.thang)"/>
          </div>
          <div class="choose-year">
            <label for="">Năm</label>
            <input id="phieuNam"
              type="text"
              size="1"
              name="nam"
              value="@ViewBag.nam"
              style="height: 26px"

            />
          </div>
        </div>
        <div class="form-group text-center">
          <label> <b>ĐIỀU TRA HOẠT ĐỘNG THƯƠNG MẠI VÀ DỊCH VỤ</b> </label>
        </div>
        <div class="form-group MSTP-info">
          <label class="P-name"><b>Phiếu 2.3/CT-VT-T</b></label>
           @if (Model.Master == null)
        {
              <div class="row">
                
                        <input type="hidden" id="macoso" name="Master.MaCoSo" maxlength="5" class="infoma" required readonly autofocus/>
              </div>
        }
        else
        {
                   <div class="row">
                   
                    <input type="hidden" id="Maphieu" asp-for="@Model.Master.MaPhieu"/>
                        <input type="hidden" id="macoso" maxlength="5" class="infoma" name="Master.MaCoSo" value="@Model.Master.MaCoSo" required readonly autofocus/>
                  </div>
        }
        
        </div>
        <div class="form-group text-center">
          <label class="text-center">
            <b>PHIẾU THU THẬP THÔNG TIN ĐỐI VỚI CƠ SỞ KINH DOANH CÁ THỂ</b>
          </label>
          <label>
            <b>
              <i>
               (Áp dụng đối với cơ sở kinh doanh cá thể có hoạt động vận tải, kho bãi)
              </i>
            </b>
          </label>
        </div>

        <div class="form-group text-center">
          <div class="row"></div>
          <div>
            <label> <b>Tháng @ViewBag.thang Năm @ViewBag.nam</b> </label>
          </div>
          <div class="row"></div>
        </div>
        <div class="form-group m-title text-center">
          <h5 style="margin-top: .5rem;"><b>A. THÔNG TIN CHUNG</b></h5>
        </div>
    @if (Model.Master != null)
    {
                    <div id="ThongTinDoanhNghiepGroup" class="form-group">
         <div class="adress">

                <div class="adress-detail">
                  <div class="row">
                    <label class="lb-info">Tỉnh/TP trực thuộc TW: </label>
                    <select name="Master.MaTinhTp" id="city" class="infoma">
                        <option value="" disabled>--- Chọn Tỉnh/TP ---</option>
                    </select>
                  </div>
                  <div class="row">
                    <label class="lb-info"
                  >Huyện/quận <i>(thị xã, TP thuộc tỉnh)</i>:
                    </label>
                    <select name="Master.MaQuanHuyen" id="district" class="infoma">
                            @* <option value="@Model.MaQuanHuyen">@getHuyen(Model.MaQuanHuyen).Name</option>*@
                     <option value="" selected>--- Chọn Huyện/quận ---</option>
                    </select>
                  </div>
                  <div class="row">
                    <label class="lb-info">Xã/phường/thị trấn: </label>
                    <select name="Master.MaPhuongXa" id="ward" class="infoma">
                            @*<option value="@Model.MaPhuongXa">@getXa(Model.MaPhuongXa).Name</option>*@
                      <option value="" selected>--- Chọn Xã/phường/thị trấn ---</option>
                    </select>
                  </div>

                </div>
              </div>
      <div class="row">
        <label class="lb-info">Địa bàn: </label>
        <input readonly type="text" value="@Model.Master.DiaChiCuThe - @getXa(Model.Master.MaPhuongXa).Name - @getHuyen(Model.Master.MaQuanHuyen).Name - @getTinh(Model.Master.MaTinhTp).Name" class="infoma" />
      </div>
            @if (Model.Master == null)
            {
                      <div class="row">
                        <label class="lb-info">Mã cơ sở: </label>
                        <input type="text" id="macoso" maxlength="5" class="infoma" required readonly autofocus/>
                      </div>
            }
            else
            {
                           <div class="row">
                            <label class="lb-info">Mã cơ sở: </label>
                            <input type="text" id="macoso" maxlength="5" class="infoma" value="@Model.Master.MaCoSo" required readonly autofocus/>
                          </div>
            }
      <div class="row">
        <label class="lb-info">Tên cơ sở: </label>
        <input readonly type="text" value="@Model.Master.Ten" name="Master.Ten"class="infoma" />
        </div>
            @if (Model.Master.MaSoThue == null && Model.Master.MaSoThue2 == null)
            {
                <div class="row">
            <label class="lb-info">Mã số thuế</label>
            <input type="text" value="" id="n0" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="1" autofocus/>
            <input type="text" value="" id="n1" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="2" />
            <input type="text" value="" id="n2" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="3" />
            <input type="text" value="" id="n3" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="4" />
            <input type="text" value="" id="n4" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="5" />
            <input type="text" value="" id="n5" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="6" />
            <input type="text" value="" id="n6" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="7" />
            <input type="text" value="" id="n7" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="8" />
            <input type="text" value="" id="n8" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="9" />
            <input type="text" value="" id="n9" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="10" />

            <input type="text" value="" id="n10" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="11" />
            <input type="text" value=""  id="n11" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="12" />
            <input type="text" value="" id="n12" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="13" />
          </div>
            }
            else
            {
                <div class="row">
            <label class="lb-info">Mã số thuế</label>
            <input type="text" value="@Model.Master.MaSoThue.Substring(0,1)" id="n0" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="1" autofocus/>
            <input type="text" value="@Model.Master.MaSoThue.Substring(1,1)" id="n1" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="2" />
            <input type="text" value="@Model.Master.MaSoThue.Substring(2,1)" id="n2" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="3" />
            <input type="text" value="@Model.Master.MaSoThue.Substring(3,1)" id="n3" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="4" />
            <input type="text" value="@Model.Master.MaSoThue.Substring(4,1)" id="n4" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="5" />
            <input type="text" value="@Model.Master.MaSoThue.Substring(5,1)" id="n5" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="6" />
            <input type="text" value="@Model.Master.MaSoThue.Substring(6,1)" id="n6" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="7" />
            <input type="text" value="@Model.Master.MaSoThue.Substring(7,1)" id="n7" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="8" />
            <input type="text" value="@Model.Master.MaSoThue.Substring(8,1)" id="n8" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="9" />
            <input type="text" value="@Model.Master.MaSoThue.Substring(9,1)" id="n9" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="10" />

            <input type="text" value="@Model.Master.MaSoThue2.Substring(0,1)" id="n10" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="11" />
            <input type="text" value="@Model.Master.MaSoThue2.Substring(1,1)"  id="n11" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="12" />
            <input type="text" value="@Model.Master.MaSoThue2.Substring(2,1)" id="n12" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="13" />
          </div>
            }
      <div class="row">
        <label class="lb-info">Thôn, ấp<i>(số nhà, đường phố)</i>: </label>
        <input readonly type="text" name="Master.DiaChiCuThe" value="@Model.Master.DiaChiCuThe" class="infoma" />
      </div>

      <div class="row">
        <label class="lb-info">Số điện thoại: </label>
        <input readonly name="Master.Sdt" value="@Model.Master.Sdt" type="text" class="infoma" />
      </div>
      <div class="row">
        <label class="lb-info">Email: </label>
        <input readonly name="Master.Email" value="@Model.Master.Email" type="text" class="infoma" />
      </div>
      <div class="loaihinh">
        <label>Loại hình kinh tế</label>

        <div class="checkbox-tt">
          <label> 1.Kinh tế nhà nước</label>
          <label> 2.Kinh tế ngoài nhà nước</label>
          <label> 3.Kinh tế có vốn đầu tư trực tiếp nước ngoài</label>
        </div>
        <div class="checkbox">
                    @if (@Model.Master.MaLh.Trim() == "01")
                    {
                <input type="radio" checked name="Master.MaLh" value="01" />
                    }
                    else
                    {
                <input disabled type="radio" name="Master.MaLh" value="01" />
                    }
                    @if (@Model.Master.MaLh.Trim() == "02")
                    {
                <input type="radio" checked name="Master.MaLh" value="02" />
                    }
                    else
                    {
                <input disabled type="radio" name="Master.MaLh" value="02" />
                    }

                    @if (@Model.Master.MaLh.Trim() == "03")
                    {
                <input type="radio" checked name="Master.MaLh" value="03" />
                    }
                    else
                    {
                <input disabled type="radio" name="Master.MaLh" value="03" />
                    }
        </div>
      </div>
          <div class="row m-0">
        <div class="col-3">
        <label class="pl-1" for=""><b>8. Ngành hoạt động kinh doanh</b></label>
        </div>
        <div class="col-9 m-0">
                    @foreach (NganhKinhDoanh nganh in getNganhKinhDoanh(Model.Master.MaCoSo))
                    {
                <div class="row m-0 pl-0">
                  <div class="col-5 pl-0">
                    <input readonly value="@nganh.MaNganh.Substring(0,1)" type="text" maxlength="1" size="1"
            class="text-center MN" />
                    <input readonly value="@nganh.MaNganh.Substring(1,1)" type="text" maxlength="1" size="1"
            class="text-center MN" />
                    <input readonly value="@nganh.MaNganh.Substring(2,1)" type="text" maxlength="1" size="1"
            class="text-center MN" />
                    <input readonly value="@nganh.MaNganh.Substring(3,1)" type="text" maxlength="1" size="1"
            class="text-center MN" />
                    <input readonly value="@nganh.MaNganh.Substring(4,1)" type="text" maxlength="1" size="1"
            class="text-center MN" />
                  </div>
                  <div class="col-7 pl-0 pr-0">
                    <label for="">Tên ngành HĐKD: @getNganhHoatDongKinhDoanh(nganh.MaNganh).TenNganh</label>
                  </div>
                </div>
                    }
          </div>
      </div>
    </div>
                    <script>
                                var citis = document.getElementById("city");
                                var districts = document.getElementById("district");
                                var wards = document.getElementById("ward");

                                var Parameter = {
                                      url: "https://localhost:" + window.location.port + "/assets/DiaChi.json",
                                  method: "GET", 
                                  responseType: "application/json", 
                                };
                                var promise = axios(Parameter);
                                promise.then(
                                    function (result) {
                                    renderCity(result.data);
                                });
                                function renderCity(data) {
                                  for (const x of data) {
                                      if(x.Id == @Html.Raw(Model.Master.MaTinhTp.Trim())){
                                            citis.options[citis.options.length] = new Option(x.Name, x.Id,true,true);
                                            const result = data.filter(n => n.Id === x.Id);

                                            for (const k of result[0].Districts) {
                                                if(k.Id == @Html.Raw(Model.Master.MaQuanHuyen.Trim())){
                                                    district.options[district.options.length] = new Option(k.Name, k.Id,true,true);
                                                    const dataCity = data.filter((n) => n.Id === citis.value);
                                                    const dataWards = dataCity[0].Districts.filter(n => n.Id === k.Id)[0].Wards;
                                                      for (const w of dataWards) {
                                                          if(w.Id==@Html.Raw(Model.Master.MaPhuongXa.Trim())){
                                                            wards.options[wards.options.length] = new Option(w.Name, w.Id,true,true);
                                                          }else{
                                                              wards.options[wards.options.length] = new Option(w.Name, w.Id);
                                                          }
                                                      }
                                                }else{
                                                    district.options[district.options.length] = new Option(k.Name, k.Id);
                                                }
                                            }
                                      }else{
                                          citis.options[citis.options.length] = new Option(x.Name, x.Id);
                                      }
                                  }
                                citis.onchange = function () {
                                    district.length = 1;
                                    ward.length = 1;
                                    if(this.value != ""){
                                      const result = data.filter(n => n.Id === this.value);

                                      for (const k of result[0].Districts) {
                                        district.options[district.options.length] = new Option(k.Name, k.Id);
                                      }
                                    }
                                  };
                                  district.onchange = function () {
                                    ward.length = 1;
                                    const dataCity = data.filter((n) => n.Id === citis.value);
                                    if (this.value != "") {
                                      const dataWards = dataCity[0].Districts.filter(n => n.Id === this.value)[0].Wards;

                                      for (const w of dataWards) {
                                            wards.options[wards.options.length] = new Option(w.Name, w.Id);
                                      }
                                    }
                                  };
                                }
                        </script>
    }
    else
    {
                    <div id="ThongTinDoanhNghiepGroup" class="form-group">
                      <div class="row">
                        <label class="lb-info">Tên doanh nghiệp/HTX: </label>
                        <input type="text" name="Master.Ten" class="infoma" />
                      </div>
                      <div class="adress">
                        <label for="">Địa chỉ doanh nghiệp </label>
                        <div class="adress-detail">
                          <div class="row">
                            <label class="lb-info">Tỉnh/TP trực thuộc TW: </label>
                            <select name="Master.MaTinhTp" id="city" class="infoma">
                              <option value="">--- Chọn Tỉnh/TP ---</option>
                            </select>
                          </div>
                          <div class="row">
                            <label class="lb-info"
                  >Huyện/quận <i>(thị xã, TP thuộc tỉnh)</i>:
                            </label>
                            <select name="Master.MaQuanHuyen" id="district" class="infoma">
                              <option value="">--- Chọn Huyện/quận ---</option>
                            </select>
                          </div>
                          <div class="row">
                            <label class="lb-info">Xã/phường/thị trấn: </label>
                            <select name="Master.MaPhuongXa" id="ward" class="infoma">
                              <option value="">--- Chọn Xã/phường/thị trấn ---</option>
                            </select>
                          </div>
                          <div class="row">
                            <label class="lb-info"
                  >Thôn, ấp<i>(số nhà, đường phố)</i>:
                            </label>
                            <input name="Master.DiaChiCuThe" type="text" class="infoma" />
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <label class="lb-info">Số điện thoại: </label>
                        <input name="Master.Sdt" type="text" class="infoma" />
                      </div>
                      <div class="row">
                        <label class="lb-info">Email: </label>
                        <input name="Master.Email" type="text" class="infoma" />
                      </div>
                      <div class="loaihinh">
                        <label>Loại hình kinh tế</label>

                        <div class="checkbox-tt">
                          <label> 1.Kinh tế nhà nước</label>
                          <label> 2.Kinh tế ngoài nhà nước</label>
                          <label> 3.Kinh tế có vốn đầu tư trực tiếp nước ngoài</label>
                        </div>
                        <div class="checkbox">
                          <input type="radio" name="Master.MaLh" value="Kinh tế nhà nước" />
                          <input 
                type="radio"
                name="Master.MaLh"
                value="Kinh tế ngoài nhà nước"
              />
                          <input
                type="radio"
                name="Master.MaLh"
                value="Kinh tế có vốn đầu tư trực tiếp nước ngoài"
              />
                        </div>
                      </div>
                      <div class="nganhKD">
                        <div class="row">
                          <label for="">Ngành hoạt động kinh doanh</label>
                          <div class="MNHD row">
                            <input
                  type="text"
                  maxlength="1"
                  size="1"
                  class="text-center MN"
                />
                            <input
                  type="text"
                  maxlength="1"
                  size="1"
                  class="text-center MN"
                />
                            <input
                  type="text"
                  maxlength="1"
                  size="1"
                  class="text-center MN"
                />
                            <input
                  type="text"
                  maxlength="1"
                  size="1"
                  class="text-center MN"
                />
                            <input
                  type="text"
                  maxlength="1"
                  size="1"
                  class="text-center MN"
                />
                          </div>
                          <label for="">Tên ngành HĐKD:</label>
                          <input type="text" readonly class="infoma-nganh" style="width: 35%;"/>
                        </div>
                      </div>    
                    </div>
                    <script>
                                var citis = document.getElementById("city");
            var districts = document.getElementById("district");
            var wards = document.getElementById("ward");
            var Parameter = {
             url: "https://localhost:" + window.location.port + "/assets/DiaChi.json",
              method: "GET", 
              responseType: "application/json", 
            };
            var promise = axios(Parameter);
            promise.then(function (result) {
              renderCity(result.data);
            });
            function renderCity(data) {
              for (const x of data) {
                citis.options[citis.options.length] = new Option(x.Name, x.Id);
              }
              citis.onchange = function () {
                district.length = 1;
                ward.length = 1;
                if(this.value != ""){
                  const result = data.filter(n => n.Id === this.value);
                  for (const k of result[0].Districts) {
                    district.options[district.options.length] = new Option(k.Name, k.Id);
                  }
                }
              };
              district.onchange = function () {
                ward.length = 1;
                const dataCity = data.filter((n) => n.Id === citis.value);
                if (this.value != "") {
                  const dataWards = dataCity[0].Districts.filter(n => n.Id === this.value)[0].Wards;
                  for (const w of dataWards) {
                    wards.options[wards.options.length] = new Option(w.Name, w.Id);
                  }
                }
              };
            }

                    </script>
    }
    <div class="form-group m-title text-center">
          <h5 style="margin-top: .5rem;"><b>B. KẾT QUẢ HOẠT ĐỘNG KINH DOANH</b></h5>
        </div>
    @if (Model.Detail == null)
    {
                     <table class="table table-striped table-hover table-bordered" id="tab-KQ">
                          <thead>
                            <tr class="text-center">
                              <th>Chi tiết Index</th>
                              <th>Đơn vị tính</th>
                              <th style="width:20%;"><b>Tháng thực hiện @toStringMonthAndYear(Int32.Parse(ViewBag.thang),Int32.Parse(ViewBag.nam))</b></th>
                              <th style="width:20%;"><b>Dự tính @toStringMonth(Int32.Parse(ViewBag.thang))/@ViewBag.nam</b></th>
                              <th style="width:20%;">
                                <b>Cộng dồn từ đầu năm đến cuối tháng @toStringMonth(Int32.Parse(ViewBag.thang))/@ViewBag.nam</b>
                            </tr>
                          </thead>
                             <tbody id="table-data">
                        <tr class="text-center">
                          <td>A</td>
                          <td>B</td>
                          <td>1</td>
                          <td>2</td>
                          <td>3</td>
                        </tr>
                        <tr>
                          <td>
                        1.Index Ông/bà vui lòng cho biết tổng số tiền thu về (bao gồm cả vốn
                        và lãi) của cơ sở trong [tháng trước] và [tháng báo cáo] là bao
                        nhiêu?
                         <input type="hidden" id="stt0" name="Detail[0].Stt" value="1."/>
                         <input type="hidden" name="Detail[0].TenCt" value="Ông/bà vui lòng cho biết tổng số tiền thu về (bao gồm cả vốn
                và lãi) của cơ sở trong [tháng trước] và [tháng báo cáo] là bao
                nhiêu?"/>  
                      </td>
                      <td class="text-center">Triệu đồng
                        <input type="hidden" name="Detail[0].Dvt" value="0 Triệu đồng"/> 
                      </td>
                      <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc0" oninput="changeThthangTruoc(0)" name="Detail[0].ThthangTruoc" class="infomal" /></td>
                      <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh0" oninput="changeDuTinh(0)" name="Detail[0].DuTinh" class="infomal" /></td>
                      <td><input type="text" pattern="[0-9,.\-$]+" required readonly id="TongCongDon0" name="Detail[0].TongCongDon" class="infomal" /></td>
                    </tr>
                @{
                    list = getNganhKinhDoanh(Model.Master.MaCoSo);
                    int i = 0;
                    int countDetails = 1;

                    for (int item = 2; item < (list.Count + 2); item++)
                    {
                                                    <tr>
                                                      <td>
                                                        2.@countDetails Trong tổng số tiền thu về của cơ sở, số tiền thu về do cung
                                                                            cấp dịch vụ <b>@getNganhHoatDongKinhDoanh(list[item-2].MaNganh).TenNganh</b> của [tháng trước] và [tháng báo
                                                        cáo] là bao nhiêu?
                                                                             <input type="hidden" id="stt2_@countDetails" name="Detail[@countDetails].Stt" value="2.@(countDetails)"/>
                                                                             <input type="hidden" name="Detail[@countDetails].TenCt" value="Trong tổng số tiền thu về của cơ sở, số tiền thu về do cung
                                                        cấp dịch vụ @getNganhHoatDongKinhDoanh(list[item-2].MaNganh).TenNganh của [tháng trước] và [tháng báo
                                            cáo] là bao nhiêu?"/>  

                                                      </td>
                                                      <td class="text-center">Triệu đồng
                                                      <input type="hidden" name="Detail[@countDetails].Dvt" value="@countDetails Triệu đồng"/>
                                                      </td>

                                                       <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc2_@(countDetails)" oninput="changeThthangTruoc('2_@(countDetails)')" name="Detail[@(countDetails)].ThthangTruoc" class="infomal" /></td>
                                                       <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh2_@(countDetails)" oninput="changeDuTinh('2_@(countDetails)')" name="Detail[@(countDetails)].DuTinh" class="infomal" /></td>
                                                       <td><input type="text" pattern="[0-9,.\-$]+" required readonly id="TongCongDon2_@(countDetails)" name="Detail[@(countDetails)].TongCongDon" class="infomal" /></td>
                                                </tr>
                        i++;
                        countDetails++;
                    }

                                            <tr class="text-left">
                                              <td colspan="5">I. HOẠT ĐỘNG VẬN TẢI HÀNH KHÁCH</td>

                                            </tr>
                                            <tr>
                                             
                                              <td>
                                                3. Cơ sở có bao nhiêu phương tiện đang sử dụng để phục vụ cho
                                                hoạt động vận tải hành khách trong [tháng trước] và dự tính
                                                [tháng báo cáo]?
                                                    <input type="hidden" id="stt3" name="Detail[@countDetails].Stt" value="3."/>
                                                    <input type="hidden" name="Detail[@countDetails].TenCt" value="Cơ sở có bao nhiêu phương tiện đang sử dụng để phục vụ cho
                                            hoạt động vận tải hành khách trong [tháng trước] và dự tính
                                            [tháng báo cáo]?"/>  
                                              </td>
                                              <td class="text-center">Cái
                                              <input type="hidden" name="Detail[@countDetails].Dvt" value="@countDetails Cái"/>
                                              </td>
                                                  <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc3" oninput="changeThthangTruoc(3)" name="Detail[@(countDetails)].ThthangTruoc" class="infomal" /></td>
                                                   <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh3" oninput="changeDuTinh(3)" name="Detail[@(countDetails)].DuTinh" class="infomal" /></td>
                                                   <td></td>
                                            </tr>
                                            <tr class="text-left">

                                              <td>
                                                4.Tổng số ghế của tất cả các phương tiện trên là bao nhiêu?
                                                     <input type="hidden" id="stt4" name="Detail[@(countDetails+1)].Stt" value="4."/>
                                                     <input type="hidden" name="Detail[@(countDetails+1)].TenCt" value="Tổng số ghế của tất cả các phương tiện trên là bao nhiêu?"/>  
                                              </td>
                                              <td class="text-center">Ghế
                                                           <input type="hidden" name="Detail[@(countDetails+1)].Dvt" value="@(countDetails+1) ghế"/>
                                               </td>
                                                  <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc4" oninput="changeThthangTruoc(4)" name="Detail[@(countDetails+1)].ThthangTruoc" class="infomal" /></td>
                                                  <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh4" oninput="changeDuTinh(4)" name="Detail[@(countDetails+1)].DuTinh" class="infomal" /></td>
                                                  <td></td>
                                            </tr>
                                            <tr class="text-left">
                                                  <td>5. Cơ sở có vận chuyển hành khách ngoài nước không?
                                                      <input type="hidden" id="stt5" name="Detail[@(countDetails+2)].Stt" value="5."/>
                                                          <input type="hidden" name="Detail[@(countDetails+2)].TenCt" value="Cơ sở có vận chuyển hành khách ngoài nước không?"/>  
                                                  </td>
                                              <td></td>
                                              <td class="text-center">
                                                1. Có <input type="radio" name="chose1" id="5" />
                                              </td>
                                              <td class="text-center">
                                                2. Không <input type="radio" name="chose1" id="5-1" />
                                              </td>
                                            </tr>
                                    <tr class="text-left">
                                        <td>
                                            6. Số chyến vận chuyển khách trong [tháng trước] và [tháng báo
                                            cáo] của cơ sở là bao nhiêu?
                                                <input type="hidden" id="stt6" name="Detail[@(countDetails+2)].Stt" value="6."/>
                                                <input type="hidden" name="Detail[@(countDetails+2)].TenCt" value="Số chyến vận chuyển khách trong [tháng trước] và [tháng báo
                                        cáo] của cơ sở là bao nhiêu?"/>  
                                        </td>
                                        <td class="text-center">Chuyến
                                                 <input type="hidden" name="Detail[@(countDetails+2)].Dvt" value="@(countDetails+2) Chuyến"/>
                                        </td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc6" oninput="changeThthangTruoc(6),th9()" name="Detail[@(countDetails+2)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh6" oninput="changeDuTinh(6),dt9()" name="Detail[@(countDetails+2)].DuTinh" class="infomal" /></td>
                                        <td></td>
                                    </tr>
                                    <tr class="text-left changed1">
                                        <td>
                                            6.1 Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?
                                            (Hiển thị nếu có câu 5 = 1 "CÓ")
                                                 <input type="hidden" id="stt6_1" name="Detail[@(countDetails+3)].Stt" value="6.1."/>
                                                 <input type="hidden" name="Detail[@(countDetails+3)].TenCt" value="Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Chuyến
                                            <input type="hidden" name="Detail[@(countDetails+3)].Dvt" value="@(countDetails+3) Chuyến"/>
                                        </td>
                                            <td><input type="text"  id="ThthangTruoc6_1" oninput="changeThthangTruoc('6_1'),th9_1()" name="Detail[@(countDetails+3)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text"  id="DuTinh6_1" oninput="changeDuTinh('6_1'),dt9_1()" name="Detail[@(countDetails+3)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            7. Số khách bình quân/chuyến trong [tháng trước] và [tháng báo
                                            cáo] là bao nhiêu?
                                                <input type="hidden" id="stt7" name="Detail[@(countDetails+4)].Stt" value="7."/>
                                                <input type="hidden" name="Detail[@(countDetails+4)].TenCt" value="Số khách bình quân/chuyến trong [tháng trước] và [tháng báo
                                        cáo] là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Hành khách
                                                <input type="hidden" name="Detail[@(countDetails+4)].Dvt" value="@(countDetails+4) Hành khách"/>
                                        </td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc7" oninput="changeThthangTruoc(7),th9()" name="Detail[@(countDetails+4)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh7" oninput="changeDuTinh(7),dt9()" name="Detail[@(countDetails+4)].DuTinh" class="infomal" /></td>
                                        <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            7.1 Trong đó, số khách bình quân 1 chuyến vận chuyển ngoài nước
                                            là bao nhiêu?
                                                 <input type="hidden" id="stt7_1" name="Detail[@(countDetails+5)].Stt" value="7.1."/>
                                                 <input type="hidden" name="Detail[@(countDetails+5)].TenCt" value="Trong đó, số khách bình quân 1 chuyến vận chuyển ngoài nước
                                        là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Hành khách
                                            <input type="hidden" name="Detail[@(countDetails+5)].Dvt" value="@(countDetails+5) Hành khách"/>
                                         </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc7_1" oninput="changeThthangTruoc('7_1'),th9_1()" name="Detail[@(countDetails+5)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh7_1" oninput="changeDuTinh('7_1'),dt9_1()" name="Detail[@(countDetails+5)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            8. Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                            khách trong [tháng trước] và [tháng báo cáo] là bao nhiêu?
                                                <input type="hidden" id="stt8" name="Detail[@(countDetails+6)].Stt" value="8."/>
                                                <input type="hidden" name="Detail[@(countDetails+6)].TenCt" value="Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                        khách trong [tháng trước] và [tháng báo cáo] là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Km
                                             <input type="hidden" name="Detail[@(countDetails+6)].Dvt" value="@(countDetails+6) km"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc8" oninput="changeThthangTruoc(8),th10()" name="Detail[@(countDetails+6)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh8" oninput="changeDuTinh(8),dt10()" name="Detail[@(countDetails+6)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            8.1 Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                            bao nhiêu?
                                                <input type="hidden" id="stt8_1" name="Detail[@(countDetails+7)].Stt" value="8.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+7)].TenCt" value="Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                        bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Km
                                            <input type="hidden" name="Detail[@(countDetails+7)].Dvt" value="@(countDetails+7) km"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc8_1" oninput="changeThthangTruoc('8_1'),th10_1()" name="Detail[@(countDetails+7)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh8_1" oninput="changeDuTinh('8_1'),dt10_1()" name="Detail[@(countDetails+7)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>9. SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN
                                             <input type="hidden" id="stt9" name="Detail[@(countDetails+8)].Stt" value="9."/>
                                             <input type="hidden" name="Detail[@(countDetails+8)].TenCt" value="SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN"/>
                                        </td>
                                        <td class="text-center">Hành khách
                                             <input type="hidden" name="Detail[@(countDetails+8)].Dvt" value="@(countDetails+8) Hành khách"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required readonly id="ThthangTruoc9"  oninput="changeThthangTruoc(9),th10()" name="Detail[@(countDetails+8)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required readonly id="DuTinh9" oninput="changeDuTinh(9),dt10()" name="Detail[@(countDetails+8)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="changed1">
                                        <td>9.1 TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN NGOÀI NƯỚC
                                            <input type="hidden" id="stt9_1" name="Detail[@(countDetails+9)].Stt" value="9.1."/>
                                            <input type="hidden" name="Detail[@(countDetails+9)].TenCt" value="TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN NGOÀI NƯỚC"/>
                                        </td>
                                        <td class="text-center">Hành khách
                                            <input type="hidden" name="Detail[@(countDetails+9)].Dvt" value="@(countDetails+9) Hành khách"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required readonly  id="ThthangTruoc9_1" oninput="changeThthangTruoc('9_1'),th10_1()" name="Detail[@(countDetails+9)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required readonly id="DuTinh9_1" oninput="changeDuTinh('9_1'),dt10_1()" name="Detail[@(countDetails+9)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>10. SỐ LƯỢT HÀNH KHÁCH LUÂN CHUYỂN
                                            <input type="hidden" id="stt10" name="Detail[@(countDetails+10)].Stt" value="10."/>
                                            <input type="hidden" name="Detail[@(countDetails+10)].TenCt" value="SỐ LƯỢT HÀNH KHÁCH LUÂN CHUYỂN"/>
                                        </td>
                                        <td class="text-center">Hành khách.Km
                                           <input type="hidden" name="Detail[@(countDetails + 10)].Dvt" value="@(countDetails + 10) Hành khách.km"/>
                                        </td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required readonly id="ThthangTruoc10" oninput="changeThthangTruoc(10)" name="Detail[@(countDetails+10)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required readonly id="DuTinh10" oninput="changeDuTinh(10)" name="Detail[@(countDetails+10)].DuTinh" class="infomal" /></td>
                                        <td></td>
                                    </tr>
                                    <tr class="text-left changed1">
                                        <td>
                                            10.1 TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN LUÂN CHUYỂN NGOÀI NƯỚC
                                            (Hiển thị nếu câu 5=1 "CÓ")
                                                <input type="hidden" id="stt10_1" name="Detail[@(countDetails+11)].Stt" value="10.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+11)].TenCt" value="TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN LUÂN CHUYỂN NGOÀI NƯỚC"/>
                                        </td>
                                        <td class="text-center">Hành khách.Km
                                            <input type="hidden" name="Detail[@(countDetails + 11)].Dvt" value="@(countDetails + 11) Hành khách.km"/>
                                        </td>
                                            <td><input type="text" id="ThthangTruoc10_1" readonly oninput="changeThthangTruoc('10_1')" name="Detail[@(countDetails+11)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" id="DuTinh10_1" readonly oninput="changeDuTinh('10_1')" name="Detail[@(countDetails+11)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td colspan="5">II. HOẠT ĐỘNG VẬN TẢI HÀNG HÓA</td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            11. Cơ sở có bao nhiêu phương tiện đang sử dụng để phục vụ cho
                                            hoạt dộng vận tải hàng hóa trong [tháng trước] và dự tính [tháng
                                            báo cáo]?
                                                <input type="hidden" id="stt11" name="Detail[@(countDetails+12)].Stt" value="11."/>
                                                <input type="hidden" name="Detail[@(countDetails+12)].TenCt" value="Cơ sở có bao nhiêu phương tiện đang sử dụng để phục vụ cho
                                        hoạt dộng vận tải hàng hóa trong [tháng trước] và dự tính [tháng
                                        báo cáo]?"/>
                                        </td>
                                        <td class="text-center">Cái
                                            <input type="hidden" name="Detail[@(countDetails + 12)].Dvt" value="@(countDetails + 12) Cái"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required  id="ThthangTruoc11" oninput="changeThthangTruoc(11)" name="Detail[@(countDetails+12)].ThthangTruoc" class="infomal" /></td>
                                                    <td><input type="text" pattern="[0-9,.\-$]+" required  id="DuTinh11" oninput="changeDuTinh(11)" name="Detail[@(countDetails+12)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            12. Tổng trọng tải của tất cả các phương tiện trên là bao nhiêu?
                                                <input type="hidden" id="stt12" name="Detail[@(countDetails+13)].Stt" value="12."/>
                                                <input type="hidden" name="Detail[@(countDetails+13)].TenCt" value="Tổng trọng tải của tất cả các phương tiện trên là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Tấn
                                            <input type="hidden" name="Detail[@(countDetails + 13)].Dvt" value="@(countDetails + 13) Tấn"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc12" oninput="changeThthangTruoc(12)" name="Detail[@(countDetails+13)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh12" oninput="changeDuTinh(12)" name="Detail[@(countDetails+13)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>13. Cơ sở có vận chuyển hàng hóa ngoài nước không?</td>
                                        <td></td>
                                        <td class="text-center">
                                            1. Có <input type="radio" name="chose2" id="13" />
                                        </td>
                                        <td class="text-center">
                                            2. Không <input type="radio" name="chose2" id="13-1" />
                                        </td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            14. Số vận chuyển hàng hóa trong [tháng trước] và [tháng báo
                                            cáo] của cơ sở là bao nhiêu?
                                                <input type="hidden" id="stt14" name="Detail[@(countDetails+14)].Stt" value="14."/>
                                                <input type="hidden" name="Detail[@(countDetails+14)].TenCt" value="Số vận chuyển hàng hóa trong [tháng trước] và [tháng báo
                                        cáo] của cơ sở là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Chuyến
                                                <input type="hidden" name="Detail[@(countDetails + 14)].Dvt" value="@(countDetails + 14) Chuyến"/>
                                        </td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc14" oninput="changeThthangTruoc(14), th17()" name="Detail[@(countDetails+14)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh14" oninput="changeDuTinh(14),dt17()" name="Detail[@(countDetails+14)].DuTinh" class="infomal" /></td>
                                        <td></td>
                                    </tr>
                                    <tr class="text-left changed2">
                                        <td>
                                            14.1 Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?
                                            (Hiển thị nếu câu 13=1 "CÓ")
                                                <input type="hidden" id="stt14_1" name="Detail[@(countDetails+15)].Stt" value="14.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+15)].TenCt" value="Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Chuyến
                                            <input type="hidden" name="Detail[@(countDetails + 15)].Dvt" value="@(countDetails + 15) Chuyến"/>
                                        </td>

                                           <td><input type="text" id="ThthangTruoc14_1" oninput="changeThthangTruoc('14_1'),th17_1()" name="Detail[@(countDetails+15)].ThthangTruoc" class="infomal" /></td>
                                           <td><input type="text" id="DuTinh14_1" oninput="changeDuTinh('14_1'),dt17_1()" name="Detail[@(countDetails+15)].DuTinh" class="infomal" /></td>
                                           <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            15. Khối lượng hàng hóa bình quân/chuyến trong [tháng trước] và
                                            [tháng báo cáo] là bao nhiêu?
                                                <input type="hidden" id="stt15" name="Detail[@(countDetails+16)].Stt" value="15."/>
                                                <input type="hidden" name="Detail[@(countDetails+16)].TenCt" value="Khối lượng hàng hóa bình quân/chuyến trong [tháng trước] và
                                        [tháng báo cáo] là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Tấn
                                            <input type="hidden" name="Detail[@(countDetails + 16)].Dvt" value="@(countDetails + 16) Tấn"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc15" oninput="changeThthangTruoc(15), th17()" name="Detail[@(countDetails+16)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh15" oninput="changeDuTinh(15),dt17()" name="Detail[@(countDetails+16)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            15.1 Trong đó, Khối lượng hàng hóa bình quân 1 chuyến vận chuyển
                                            ngoài nước là bao nhiêu?
                                                <input type="hidden" id="stt15_1" name="Detail[@(countDetails+17)].Stt" value="15.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+17)].TenCt" value="Trong đó, Khối lượng hàng hóa bình quân 1 chuyến vận chuyển
                                        ngoài nước là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Tấn
                                            <input type="hidden" name="Detail[@(countDetails + 17)].Dvt" value="@(countDetails + 17) Tấn"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc15_1" oninput="changeThthangTruoc('15_1'), th17_1()" name="Detail[@(countDetails+17)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh15_1" oninput="changeDuTinh('15_1'), dt17_1()" name="Detail[@(countDetails+17)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            16. Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                            hàng hóa trong [tháng trước] và [tháng báo cáo] là bao nhiêu?
                                                 <input type="hidden" id="stt16" name="Detail[@(countDetails+18)].Stt" value="16."/>
                                                 <input type="hidden" name="Detail[@(countDetails+18)].TenCt" value="Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                        hàng hóa trong [tháng trước] và [tháng báo cáo] là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Km
                                            <input type="hidden" name="Detail[@(countDetails + 18)].Dvt" value="@(countDetails + 18) km"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc16" oninput="changeThthangTruoc(16), th18()" name="Detail[@(countDetails+18)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh16" oninput="changeDuTinh(16), dt18()" name="Detail[@(countDetails+18)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            16.1 Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                            bao nhiêu?
                                                <input type="hidden" id="stt16_1" name="Detail[@(countDetails+19)].Stt" value="16.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+19)].TenCt" value="Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                        bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Km
                                            <input type="hidden" name="Detail[@(countDetails + 19)].Dvt" value="@(countDetails + 19) km"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc16_1" oninput="changeThthangTruoc('16_1'),th18_1()" name="Detail[@(countDetails+19)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh16_1" oninput="changeDuTinh('16_1'),dt18_1()" name="Detail[@(countDetails+19)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>17. KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN
                                            <input type="hidden" id="stt17" name="Detail[@(countDetails+20)].Stt" value="17."/>
                                            <input type="hidden" name="Detail[@(countDetails+20)].TenCt" value="KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN"/>
                                        </td>
                                        <td class="text-center">Tấn
                                            <input type="hidden" name="Detail[@(countDetails + 20)].Dvt" value="@(countDetails + 20) Tấn"/>
                                        </td>
                                        <td><input type="text" id="ThthangTruoc17" oninput="changeThthangTruoc(17),th18()" name="Detail[@(countDetails+20)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" id="DuTinh17" oninput="changeDuTinh(17),dt18()" name="Detail[@(countDetails+20)].DuTinh" class="infomal" /></td>
                                        <td></td>
                                    </tr>
                                    <tr class="text-left changed2">
                                        <td>
                                            17.1 TRONG ĐÓ, KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN NGOÀI NƯỚC (Hiển
                                            thị nếu câu 13=1 "CÓ")
                                                <input type="hidden" id="stt17_1" name="Detail[@(countDetails+21)].Stt" value="17.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+21)].TenCt" value="TRONG ĐÓ, KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN NGOÀI NƯỚC"/>
                                        </td>
                                        <td class="text-center">Tấn
                                            <input type="hidden" name="Detail[@(countDetails + 21)].Dvt" value="@(countDetails + 21) Tấn"/>
                                        </td>
                                            <td><input type="text" id="ThthangTruoc17_1" oninput="changeThthangTruoc('17_1'),th18_1()" name="Detail[@(countDetails+21)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" id="DuTinh17_1" oninput="changeDuTinh('17_1'),dt18_1()" name="Detail[@(countDetails+21)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>18. KHỐI LƯỢNG HÀNG HÓA LUÂN CHUYỂN
                                            <input type="hidden" id="stt18" name="Detail[@(countDetails+22)].Stt" value="18."/>
                                            <input type="hidden" name="Detail[@(countDetails+22)].TenCt" value="KHỐI LƯỢNG HÀNG HÓA LUÂN CHUYỂN"/>
                                        </td>
                                        <td class="text-center">Tấn.Km
                                            <input type="hidden" name="Detail[@(countDetails + 22)].Dvt" value="@(countDetails + 22) Tấn.Km"/>
                                        </td>
                                            <td><input type="text" id="ThthangTruoc18" oninput="changeThthangTruoc(18)" name="Detail[@(countDetails+22)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" id="DuTinh18" oninput="changeDuTinh(18)" name="Detail[@(countDetails+22)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left changed2">
                                        <td>
                                            18.1 TRONG ĐÓ, KHỐI LƯỢNG LUÂN CHUYỂN NGOÀI NƯỚC (Hiển thị nếu
                                            câu 13=1 "CÓ")
                                                <input type="hidden" id="stt18_1" name="Detail[@(countDetails+23)].Stt" value="18.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+23)].TenCt" value="TRONG ĐÓ, KHỐI LƯỢNG LUÂN CHUYỂN NGOÀI NƯỚC"/>
                                        </td>
                                        <td class="text-center">Tấn.Km
                                            <input type="hidden" name="Detail[@(countDetails + 23)].Dvt" value="@(countDetails + 23) Tấn.Km"/>
                                        </td>
                                            <td><input type="text" id="ThthangTruoc18_1" oninput="changeThthangTruoc('18_1')" name="Detail[@(countDetails+23)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" id="DuTinh18_1" oninput="changeDuTinh('18_1')" name="Detail[@(countDetails+23)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                    countDetails++;
                }
                  </tbody>
            </table>
    }
    else
    {
                            <table class="table table-striped table-hover table-bordered" id="tab-KQ">
                      <thead>
                        <tr class="text-center">
                          <th>Chi tiết Index</th>
                          <th>Đơn vị tính</th>
                          <th style="width:20%;"><b>Tháng thực hiện @toStringMonthAndYear(Int32.Parse(ViewBag.thang),Int32.Parse(ViewBag.nam))</b></th>
                          <th style="width:20%;"><b>Dự tính @toStringMonth(Int32.Parse(ViewBag.thang))/@ViewBag.nam</b></th>
                          <th style="width:20%;">
                            <b>Cộng dồn từ đầu năm đến cuối tháng @toStringMonth(Int32.Parse(ViewBag.thang))/@ViewBag.nam</b>
                        </tr>
                      </thead>
                             <tbody id="table-data">
                    <tr class="text-center">
                      <td>A</td>
                      <td>B</td>
                      <td>1</td>
                      <td>2</td>
                      <td>3</td>
                    </tr>
                    <tr>
                      <td>
                        1.Index Ông/bà vui lòng cho biết tổng số tiền thu về (bao gồm cả vốn
                        và lãi) của cơ sở trong [tháng trước] và [tháng báo cáo] là bao
                        nhiêu?
                         <input type="hidden" id="stt0" name="Detail[0].Stt" value="1."/>
                         <input type="hidden" name="Detail[0].TenCt" value="Ông/bà vui lòng cho biết tổng số tiền thu về (bao gồm cả vốn
                và lãi) của cơ sở trong [tháng trước] và [tháng báo cáo] là bao
                nhiêu?"/>  
                      </td>
                      <td class="text-center">Triệu đồng
                        <input type="hidden" name="Detail[0].Dvt" value="0 Triệu đồng"/> 
                      </td>
                      <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc0" oninput="changeThthangTruoc(0)" value="@Model.Detail[0].ThthangTruoc" name="Detail[0].ThthangTruoc" class="infomal" /></td>
                      <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh0" oninput="changeDuTinh(0)" value="@Model.Detail[0].DuTinh" name="Detail[0].DuTinh" class="infomal" /></td>
                      <td><input type="text" pattern="[0-9,.\-$]+" required readonly id="TongCongDon0" value="@Model.Detail[0].TongCongDon" name="Detail[0].TongCongDon" class="infomal" /></td>
                    </tr>
                @{
                    list = getNganhKinhDoanh(Model.Master.MaCoSo);
                    int i = 0;
                    int countDetails = 1;

                    for (int item = 2; item < (list.Count + 2); item++)
                    {
                                                                <tr>
                                                                  <td>
                                                                    2.@countDetails Trong tổng số tiền thu về của cơ sở, số tiền thu về do cung
                                                                                        cấp dịch vụ <b>@getNganhHoatDongKinhDoanh(list[item-2].MaNganh).TenNganh</b> của [tháng trước] và [tháng báo
                                                                    cáo] là bao nhiêu?
                                                                                         <input type="hidden" id="stt2_@countDetails" name="Detail[@countDetails].Stt" value="2.@(countDetails)"/>
                                                                                         <input type="hidden" name="Detail[@countDetails].TenCt" value="Trong tổng số tiền thu về của cơ sở, số tiền thu về do cung
                                                            cấp dịch vụ @getNganhHoatDongKinhDoanh(list[item-2].MaNganh).TenNganh của [tháng trước] và [tháng báo
                                                cáo] là bao nhiêu?"/>  

                                                                  </td>
                                                      <td class="text-center">Triệu đồng
                                                      <input type="hidden" name="Detail[@countDetails].Dvt" value="@countDetails Triệu đồng"/>
                                                      </td>

                                                                   <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc2_@(countDetails)" value="@Model.Detail[countDetails].ThthangTruoc" oninput="changeThthangTruoc('2_@(countDetails)')" name="Detail[@(countDetails)].ThthangTruoc" class="infomal" /></td>
                                                                   <td><input type="text" pattern="[0-9,.\-$]+" required  id="DuTinh2_@(countDetails)" value="@Model.Detail[countDetails].DuTinh"  oninput="changeDuTinh('2_@(countDetails)')" name="Detail[@(countDetails)].DuTinh" class="infomal" /></td>
                                                                   <td><input type="text" pattern="[0-9,.\-$]+" required readonly id="TongCongDon2_@(countDetails)" value="@Model.Detail[countDetails].TongCongDon" name="Detail[@(countDetails)].TongCongDon" class="infomal" /></td>
                                                </tr>
                        i++;
                        countDetails++;
                    }

                                            <tr class="text-left">
                                              <td colspan="5">I. HOẠT ĐỘNG VẬN TẢI HÀNH KHÁCH</td>

                                            </tr>
                                            <tr>

                                              <td>
                                                3. Cơ sở có bao nhiêu phương tiện đang sử dụng để phục vụ cho
                                                hoạt động vận tải hành khách trong [tháng trước] và dự tính
                                                [tháng báo cáo]?
                                                    <input type="hidden" id="stt3" name="Detail[@countDetails].Stt" value="3."/>
                                                    <input type="hidden" name="Detail[@countDetails].TenCt" value="Cơ sở có bao nhiêu phương tiện đang sử dụng để phục vụ cho
                                            hoạt động vận tải hành khách trong [tháng trước] và dự tính
                                            [tháng báo cáo]?"/>  
                                              </td>
                                              <td class="text-center">Cái
                                                      <input type="hidden" name="Detail[@countDetails].Dvt" value="@countDetails Cái"/>
                                              </td>
                                                   <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc3" oninput="changeThthangTruoc(3)" value="@Model.Detail[(countDetails)].ThthangTruoc" name="Detail[@(countDetails)].ThthangTruoc" class="infomal" /></td>
                                                   <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh3" oninput="changeDuTinh(3)" value="@Model.Detail[countDetails].DuTinh" name="Detail[@(countDetails)].DuTinh" class="infomal" /></td>
                                                   <td></td>
                                            </tr>
                                            <tr class="text-left">

                                              <td>
                                                4.  Tổng số ghế của tất cả các phương tiện trên là bao nhiêu?
                                                     <input type="hidden" id="stt4" name="Detail[@(countDetails+1)].Stt" value="4."/>
                                                     <input type="hidden" name="Detail[@(countDetails+1)].TenCt" value="Tổng số ghế của tất cả các phương tiện trên là bao nhiêu?"/>  
                                              </td>
                                              <td class="text-center">Ghế
                                                           <input type="hidden" name="Detail[@(countDetails+1)].Dvt" value="@(countDetails+1) ghế"/>
                                               </td>
                                                  <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc4" oninput="changeThthangTruoc(4)" value="@Model.Detail[(countDetails+1)].ThthangTruoc" name="Detail[@(countDetails+1)].ThthangTruoc" class="infomal" /></td>
                                                  <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh4" oninput="changeDuTinh(4)" value="@Model.Detail[(countDetails+1)].DuTinh" name="Detail[@(countDetails+1)].DuTinh" class="infomal" /></td>
                                                  <td></td>
                                            </tr>
                                            <tr class="text-left">
                                                  <td>5. Cơ sở có vận chuyển hành khách ngoài nước không?
                                                      <input type="hidden" id="stt5" name="Detail[@(countDetails+2)].Stt" value="5."/>
                                                          <input type="hidden" name="Detail[@(countDetails+2)].TenCt" value="Cơ sở có vận chuyển hành khách ngoài nước không?"/>  
                                                  </td>
                                              <td></td>
                                              <td class="text-center">
                                                1. Có <input type="radio" name="chose1" id="5" />
                                              </td>
                                              <td class="text-center">
                                                2. Không <input type="radio" name="chose1" id="5-1" />
                                              </td>
                                            </tr>
                                    <tr class="text-left">
                                        <td>
                                            6. Số chyến vận chuyển khách trong [tháng trước] và [tháng báo
                                            cáo] của cơ sở là bao nhiêu?
                                                <input type="hidden" id="stt6" name="Detail[@(countDetails+2)].Stt" value="6."/>
                                                <input type="hidden" name="Detail[@(countDetails+2)].TenCt" value="Số chyến vận chuyển khách trong [tháng trước] và [tháng báo
                                        cáo] của cơ sở là bao nhiêu?"/>  
                                        </td>
                                        <td class="text-center">Chuyến
                                                 <input type="hidden" name="Detail[@(countDetails+2)].Dvt" value="@(countDetails+2) Chuyến"/>
                                        </td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc6" oninput="changeThthangTruoc(6),th9()" value="@Model.Detail[(countDetails+2)].ThthangTruoc" name="Detail[@(countDetails+2)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh6" oninput="changeDuTinh(6),dt9()" value="@Model.Detail[(countDetails+2)].DuTinh" name="Detail[@(countDetails+2)].DuTinh" class="infomal" /></td>
                                        <td></td>
                                    </tr>
                                    <tr class="text-left changed1">
                                        <td>
                                            6.1 Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?
                                            (Hiển thị nếu có câu 5 = 1 "CÓ")
                                                 <input type="hidden" id="stt6_1" name="Detail[@(countDetails+3)].Stt" value="6.1."/>
                                                 <input type="hidden" name="Detail[@(countDetails+3)].TenCt" value="Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Chuyến
                                            <input type="hidden" name="Detail[@(countDetails+3)].Dvt" value="@(countDetails+3) Chuyến"/>
                                        </td>
                                            <td><input type="text" id="ThthangTruoc6_1" oninput="changeThthangTruoc('6_1'),th9_1()" value="@Model.Detail[(countDetails+3)].ThthangTruoc" name="Detail[@(countDetails+3)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" id="DuTinh6_1" oninput="changeDuTinh('6_1'),dt9_1()" value="@Model.Detail[(countDetails+3)].DuTinh" name="Detail[@(countDetails+3)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            7. Số khách bình quân/chuyến trong [tháng trước] và [tháng báo
                                            cáo] là bao nhiêu?  
                                                <input type="hidden" id="stt7" name="Detail[@(countDetails+4)].Stt" value="7."/>
                                                <input type="hidden" name="Detail[@(countDetails+4)].TenCt" value="Số khách bình quân/chuyến trong [tháng trước] và [tháng báo
                                        cáo] là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Hành khách
                                                <input type="hidden" name="Detail[@(countDetails+4)].Dvt" value="@(countDetails+4) Hành khách"/>
                                        </td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc7" oninput="changeThthangTruoc(7),th9()" value="@Model.Detail[(countDetails+4)].ThthangTruoc" name="Detail[@(countDetails+4)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh7" oninput="changeDuTinh(7),dt9()" value="@Model.Detail[(countDetails+4)].DuTinh" name="Detail[@(countDetails+4)].DuTinh" class="infomal" /></td>
                                        <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            7.1 Trong đó, số khách bình quân 1 chuyến vận chuyển ngoài nước
                                            là bao nhiêu?
                                                 <input type="hidden" id="stt7_1" name="Detail[@(countDetails+5)].Stt" value="7.1."/>
                                                 <input type="hidden" name="Detail[@(countDetails+5)].TenCt" value="Trong đó, số khách bình quân 1 chuyến vận chuyển ngoài nước
                                        là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Hành khách
                                            <input type="hidden" name="Detail[@(countDetails+5)].Dvt" value="@(countDetails+5) Hành khách"/>
                                         </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc7_1" oninput="changeThthangTruoc('7_1'),th9_1()" value="@Model.Detail[(countDetails+5)].ThthangTruoc" name="Detail[@(countDetails+5)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh7_1" oninput="changeDuTinh('7_1'),dt9_1()" value="@Model.Detail[(countDetails+5)].DuTinh" name="Detail[@(countDetails+5)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            8. Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                            khách trong [tháng trước] và [tháng báo cáo] là bao nhiêu?
                                                <input type="hidden" id="stt8" name="Detail[@(countDetails+6)].Stt" value="8."/>
                                                <input type="hidden" name="Detail[@(countDetails+6)].TenCt" value="Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                        khách trong [tháng trước] và [tháng báo cáo] là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Km
                                             <input type="hidden" name="Detail[@(countDetails+6)].Dvt" value="@(countDetails+6) km"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc8" oninput="changeThthangTruoc(8),th10()" value="@Model.Detail[(countDetails+6)].ThthangTruoc" name="Detail[@(countDetails+6)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh8" oninput="changeDuTinh(8),dt10()"  value="@Model.Detail[(countDetails+6)].DuTinh" name="Detail[@(countDetails+6)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            8.1 Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                            bao nhiêu?
                                                <input type="hidden" id="stt8_1" name="Detail[@(countDetails+7)].Stt" value="8.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+7)].TenCt" value="Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                        bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Km
                                            <input type="hidden" name="Detail[@(countDetails+7)].Dvt" value="@(countDetails+7) km"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc8_1" oninput="changeThthangTruoc('8_1'),th10_1()" value="@Model.Detail[(countDetails+7)].ThthangTruoc" name="Detail[@(countDetails+7)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh8_1" oninput="changeDuTinh('8_1'),dt10_1()" value="@Model.Detail[(countDetails+7)].DuTinh" name="Detail[@(countDetails+7)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>9. SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN
                                             <input type="hidden" id="stt9" name="Detail[@(countDetails+8)].Stt" value="9."/>
                                             <input type="hidden" name="Detail[@(countDetails+8)].TenCt" value="SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN"/>
                                        </td>
                                        <td class="text-center">Hành khách
                                             <input type="hidden" name="Detail[@(countDetails+8)].Dvt" value="@(countDetails+8) Hành khách"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" readonly required id="ThthangTruoc9"  oninput="changeThthangTruoc(9),th10()" value="@Model.Detail[(countDetails+8)].ThthangTruoc" name="Detail[@(countDetails+8)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" readonly required id="DuTinh9" oninput="changeDuTinh(9),dt10()" value="@Model.Detail[(countDetails+8)].DuTinh" name="Detail[@(countDetails+8)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="changed1">
                                        <td>9.1 TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN NGOÀI NƯỚC
                                            <input type="hidden" id="stt9_1" name="Detail[@(countDetails+9)].Stt" value="9.1."/>
                                            <input type="hidden" name="Detail[@(countDetails+9)].TenCt" value="TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN NGOÀI NƯỚC"/>
                                        </td>
                                        <td class="text-center">Hành khách
                                            <input type="hidden" name="Detail[@(countDetails+9)].Dvt" value="@(countDetails+9) Hành khách"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" readonly  id="ThthangTruoc9_1" oninput="changeThthangTruoc('9_1'),th10_1()" value="@Model.Detail[(countDetails+9)].ThthangTruoc" name="Detail[@(countDetails+9)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" readonly id="DuTinh9_1" oninput="changeDuTinh('9_1'),dt10_1()" value="@Model.Detail[(countDetails+9)].DuTinh" name="Detail[@(countDetails+9)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>10. SỐ LƯỢT HÀNH KHÁCH LUÂN CHUYỂN
                                            <input type="hidden" id="stt10" name="Detail[@(countDetails+10)].Stt" value="10."/>
                                            <input type="hidden" name="Detail[@(countDetails+10)].TenCt" value="SỐ LƯỢT HÀNH KHÁCH LUÂN CHUYỂN"/>
                                        </td>
                                        <td class="text-center">Hành khách.Km
                                           <input type="hidden" name="Detail[@(countDetails + 10)].Dvt" value="@(countDetails + 10) Hành khách.km"/>
                                        </td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required readonly id="ThthangTruoc10" oninput="changeThthangTruoc(10)" value="@Model.Detail[(countDetails+10)].ThthangTruoc" name="Detail[@(countDetails+10)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required readonly id="DuTinh10" oninput="changeDuTinh(10)" value="@Model.Detail[(countDetails+10)].DuTinh" name="Detail[@(countDetails+10)].DuTinh" class="infomal" /></td>
                                        <td></td>
                                    </tr>
                                    <tr class="text-left changed1">
                                        <td>
                                            10.1 TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN LUÂN CHUYỂN NGOÀI NƯỚC
                                            (Hiển thị nếu câu 5=1 "CÓ")
                                                <input type="hidden" id="stt10_1" name="Detail[@(countDetails+11)].Stt" value="10.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+11)].TenCt" value="TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN LUÂN CHUYỂN NGOÀI NƯỚC"/>
                                        </td>
                                        <td class="text-center">Hành khách.Km
                                            <input type="hidden" name="Detail[@(countDetails + 11)].Dvt" value="@(countDetails + 11) Hành khách.km"/>
                                        </td>
                                            <td><input type="text" readonly id="ThthangTruoc10_1" oninput="changeThthangTruoc('10_1')" value="@Model.Detail[(countDetails+11)].ThthangTruoc" name="Detail[@(countDetails+11)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" readonly id="DuTinh10_1" oninput="changeDuTinh('10_1')" value="@Model.Detail[(countDetails+11)].DuTinh" name="Detail[@(countDetails+11)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td colspan="5">II. HOẠT ĐỘNG VẬN TẢI HÀNG HÓA</td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            11. Cơ sở có bao nhiêu phương tiện đang sử dụng để phục vụ cho
                                            hoạt dộng vận tải hàng hóa trong [tháng trước] và dự tính [tháng
                                            báo cáo]?
                                                <input type="hidden" id="stt11" name="Detail[@(countDetails+12)].Stt" value="11."/>
                                                <input type="hidden" name="Detail[@(countDetails+12)].TenCt" value="Cơ sở có bao nhiêu phương tiện đang sử dụng để phục vụ cho
                                        hoạt dộng vận tải hàng hóa trong [tháng trước] và dự tính [tháng
                                        báo cáo]?"/>
                                        </td>
                                        <td class="text-center">Cái
                                            <input type="hidden" name="Detail[@(countDetails + 12)].Dvt" value="@(countDetails + 12) Cái"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc11" oninput="changeThthangTruoc(11)" value="@Model.Detail[(countDetails+12)].ThthangTruoc" name="Detail[@(countDetails+12)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh11" oninput="changeDuTinh(11)" value="@Model.Detail[(countDetails+12)].DuTinh" name="Detail[@(countDetails+12)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            12. Tổng trọng tải của tất cả các phương tiện trên là bao nhiêu?
                                                <input type="hidden" id="stt12" name="Detail[@(countDetails+13)].Stt" value="12."/>
                                                <input type="hidden" name="Detail[@(countDetails+13)].TenCt" value="Tổng trọng tải của tất cả các phương tiện trên là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Tấn
                                            <input type="hidden" name="Detail[@(countDetails + 13)].Dvt" value="@(countDetails + 13) Tấn"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc12" oninput="changeThthangTruoc(12)" value="@Model.Detail[(countDetails+13)].ThthangTruoc" name="Detail[@(countDetails+13)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh12" oninput="changeDuTinh(12)" value="@Model.Detail[(countDetails+13)].DuTinh" name="Detail[@(countDetails+13)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>13. Cơ sở có vận chuyển hàng hóa ngoài nước không?</td>
                                        <td></td>
                                        <td class="text-center">
                                            1. Có <input type="radio" name="chose2" id="13" />
                                        </td>
                                        <td class="text-center">
                                            2. Không <input type="radio" name="chose2" id="13-1" />
                                        </td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            14. Số vận chuyển hàng hóa trong [tháng trước] và [tháng báo
                                            cáo] của cơ sở là bao nhiêu?
                                                <input type="hidden" id="stt14" name="Detail[@(countDetails+14)].Stt" value="14."/>
                                                <input type="hidden" name="Detail[@(countDetails+14)].TenCt" value="Số vận chuyển hàng hóa trong [tháng trước] và [tháng báo
                                        cáo] của cơ sở là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Chuyến
                                                <input type="hidden" name="Detail[@(countDetails + 14)].Dvt" value="@(countDetails + 14) Chuyến"/>
                                        </td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc14" oninput="changeThthangTruoc(14), th17()" value="@Model.Detail[(countDetails+14)].ThthangTruoc" name="Detail[@(countDetails+14)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh14" oninput="changeDuTinh(14),dt17()" value="@Model.Detail[(countDetails+14)].DuTinh" name="Detail[@(countDetails+14)].DuTinh" class="infomal" /></td>
                                        <td></td>
                                    </tr>
                                    <tr class="text-left changed2">
                                        <td>
                                            14.1 Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?
                                            (Hiển thị nếu câu 13=1 "CÓ")
                                                <input type="hidden" id="stt14_1" name="Detail[@(countDetails+15)].Stt" value="14.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+15)].TenCt" value="Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Chuyến
                                            <input type="hidden" name="Detail[@(countDetails + 15)].Dvt" value="@(countDetails + 15) Chuyến"/>
                                        </td>

                                           <td><input type="text" id="ThthangTruoc14_1" oninput="changeThthangTruoc('14_1'),th17_1()" value="@Model.Detail[(countDetails+15)].ThthangTruoc" name="Detail[@(countDetails+15)].ThthangTruoc" class="infomal" /></td>
                                           <td><input type="text" id="DuTinh14_1" oninput="changeDuTinh('14_1'),dt17_1()" value="@Model.Detail[(countDetails+15)].DuTinh" name="Detail[@(countDetails+15)].DuTinh" class="infomal" /></td>
                                           <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            15. Khối lượng hàng hóa bình quân/chuyến trong [tháng trước] và
                                            [tháng báo cáo] là bao nhiêu?
                                                <input type="hidden" id="stt15" name="Detail[@(countDetails+16)].Stt" value="15."/>
                                                <input type="hidden" name="Detail[@(countDetails+16)].TenCt" value="Khối lượng hàng hóa bình quân/chuyến trong [tháng trước] và
                                        [tháng báo cáo] là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Tấn
                                            <input type="hidden" name="Detail[@(countDetails + 16)].Dvt" value="@(countDetails + 16) Tấn"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc15" oninput="changeThthangTruoc(15),th17()" value="@Model.Detail[(countDetails+16)].ThthangTruoc" name="Detail[@(countDetails+16)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh15" oninput="changeDuTinh(15),dt17()" value="@Model.Detail[(countDetails+16)].DuTinh" name="Detail[@(countDetails+16)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            15.1 Trong đó, Khối lượng hàng hóa bình quân 1 chuyến vận chuyển
                                            ngoài nước là bao nhiêu?
                                                <input type="hidden" id="stt15_1" name="Detail[@(countDetails+17)].Stt" value="15.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+17)].TenCt" value="Trong đó, Khối lượng hàng hóa bình quân 1 chuyến vận chuyển
                                        ngoài nước là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Tấn
                                            <input type="hidden" name="Detail[@(countDetails + 17)].Dvt" value="@(countDetails + 17) Tấn"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc15_1" oninput="changeThthangTruoc('15_1'),th17_1()" value="@Model.Detail[(countDetails+17)].ThthangTruoc" name="Detail[@(countDetails+17)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh15_1" oninput="changeDuTinh('15_1'),dt17_1()" value="@Model.Detail[(countDetails+17)].DuTinh" name="Detail[@(countDetails+17)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            16. Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                            hàng hóa trong [tháng trước] và [tháng báo cáo] là bao nhiêu?
                                                 <input type="hidden" id="stt16" name="Detail[@(countDetails+18)].Stt" value="16."/>
                                                 <input type="hidden" name="Detail[@(countDetails+18)].TenCt" value="Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                        hàng hóa trong [tháng trước] và [tháng báo cáo] là bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Km
                                            <input type="hidden" name="Detail[@(countDetails + 18)].Dvt" value="@(countDetails + 18) km"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc16" oninput="changeThthangTruoc(16),th18()" value="@Model.Detail[(countDetails+18)].ThthangTruoc" name="Detail[@(countDetails+18)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh16" oninput="changeDuTinh(16),dt18()" value="@Model.Detail[(countDetails+18)].DuTinh" name="Detail[@(countDetails+18)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>
                                            16.1 Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                            bao nhiêu?
                                                <input type="hidden" id="stt16_1" name="Detail[@(countDetails+19)].Stt" value="16.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+19)].TenCt" value="Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                        bao nhiêu?"/>
                                        </td>
                                        <td class="text-center">Km
                                            <input type="hidden" name="Detail[@(countDetails + 19)].Dvt" value="@(countDetails + 19) km"/>
                                        </td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="ThthangTruoc16_1" oninput="changeThthangTruoc('16_1'),th18_1()" value="@Model.Detail[(countDetails+19)].ThthangTruoc" name="Detail[@(countDetails+19)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" pattern="[0-9,.\-$]+" required id="DuTinh16_1" oninput="changeDuTinh('16_1'),dt18_1()" value="@Model.Detail[(countDetails+19)].DuTinh" name="Detail[@(countDetails+19)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>17. KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN
                                            <input type="hidden" id="stt17" name="Detail[@(countDetails+20)].Stt" value="17."/>
                                            <input type="hidden" name="Detail[@(countDetails+20)].TenCt" value="KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN"/>
                                        </td>
                                        <td class="text-center">Tấn
                                            <input type="hidden" name="Detail[@(countDetails + 20)].Dvt" value="@(countDetails + 20) Tấn"/>
                                        </td>
                                        <td><input type="text" id="ThthangTruoc17" readonly oninput="changeThthangTruoc(17),th18()" value="@Model.Detail[(countDetails+20)].ThthangTruoc" name="Detail[@(countDetails+20)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" id="DuTinh17" readonly oninput="changeDuTinh(17),dt18()" value="@Model.Detail[(countDetails+20)].DuTinh" name="Detail[@(countDetails+20)].DuTinh" class="infomal" /></td>
                                        <td></td>
                                    </tr>
                                    <tr class="text-left changed2">
                                        <td>
                                            17.1 TRONG ĐÓ, KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN NGOÀI NƯỚC (Hiển
                                            thị nếu câu 13=1 "CÓ")
                                                <input type="hidden" id="stt17_1" name="Detail[@(countDetails+21)].Stt" value="17.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+21)].TenCt" value="TRONG ĐÓ, KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN NGOÀI NƯỚC"/>
                                        </td>
                                        <td class="text-center">Tấn
                                            <input type="hidden" name="Detail[@(countDetails + 21)].Dvt" value="@(countDetails + 21) Tấn"/>
                                        </td>
                                            <td><input type="text" readonly id="ThthangTruoc17_1" oninput="changeThthangTruoc('17_1'),th18_1()" value="@Model.Detail[(countDetails+21)].ThthangTruoc" name="Detail[@(countDetails+21)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" readonly id="DuTinh17_1" oninput="changeDuTinh('17_1'),dt18_1()" value="@Model.Detail[(countDetails+21)].DuTinh" name="Detail[@(countDetails+21)].DuTinh" class="infomal" /></td>
                                            <td></td>
                                    </tr>
                                    <tr class="text-left">
                                        <td>18. KHỐI LƯỢNG HÀNG HÓA LUÂN CHUYỂN
                                            <input type="hidden" id="stt18" name="Detail[@(countDetails+22)].Stt" value="18."/>
                                            <input type="hidden" name="Detail[@(countDetails+22)].TenCt" value="KHỐI LƯỢNG HÀNG HÓA LUÂN CHUYỂN"/>
                                        </td>
                                        <td class="text-center">Tấn.Km
                                            <input type="hidden" name="Detail[@(countDetails + 22)].Dvt" value="@(countDetails + 22) Tấn.Km"/>
                                        </td>
                                            <td><input type="text" readonly id="ThthangTruoc18" oninput="changeThthangTruoc(18)" value="@Model.Detail[(countDetails+22)].ThthangTruoc" name="Detail[@(countDetails+22)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" readonly id="DuTinh18" oninput="changeDuTinh(18)" value="@Model.Detail[(countDetails+22)].DuTinh" name="Detail[@(countDetails+22)].DuTinh" class="infomal" /></td>
                                                    <td></td>
                                    </tr>
                                    <tr class="text-left changed2">
                                        <td>
                                            18.1 TRONG ĐÓ, KHỐI LƯỢNG LUÂN CHUYỂN NGOÀI NƯỚC (Hiển thị nếu
                                            câu 13=1 "CÓ")
                                                <input type="hidden" id="stt18_1" name="Detail[@(countDetails+23)].Stt" value="18.1."/>
                                                <input type="hidden" name="Detail[@(countDetails+23)].TenCt" value="TRONG ĐÓ, KHỐI LƯỢNG LUÂN CHUYỂN NGOÀI NƯỚC"/>
                                        </td>
                                        <td class="text-center">Tấn.Km
                                            <input type="hidden" name="Detail[@(countDetails + 23)].Dvt" value="@(countDetails + 23) Tấn.Km"/>
                                        </td>
                                            <td><input type="text" readonly id="ThthangTruoc18_1" oninput="changeThthangTruoc('18_1')" value="@Model.Detail[(countDetails+23)].ThthangTruoc" name="Detail[@(countDetails+23)].ThthangTruoc" class="infomal" /></td>
                                            <td><input type="text" readonly id="DuTinh18_1" oninput="changeDuTinh('18_1')" value="@Model.Detail[(countDetails+23)].DuTinh" name="Detail[@(countDetails+23)].DuTinh" class="infomal" /></td>
                                                    <td></td>
                                    </tr>
                    countDetails++;
                }
                  </tbody>
                    </table>
    }

        <div class="form-group m-title text-center">
          <h5 style="margin-top: .5rem;"><b>C. CÁC YẾU TỔ ẢNH HƯỞNG ĐẾN HOẠT ĐỘNG KINH DOANH</b></h5>
        </div>
        <div class="form-group">
          <label for=""
            >Yếu tố nào sau đây ảnh hưởng đến hoạt động kinh doanh của đơn vị
            trong tháng ...</label
          >
          <div class="YTAH">
            <div class="YTAH-tt">
              <label for="">1. Nhu cầu thị trường</label>
              <label for="">2. Dịch bệnh</label>
              <label for="">3. Thời tiết</label>
              <label for="">4. Ảnh hưởng mùa vụ</label>
              <label for="">5. Thay đổi nhân sự</label>
              <label for="">6. Thay đổi kĩ thuật/công nghệ/phương tiện</label>
              <label for="">7. Nguồn vốn kinh doanh</label>
              <label for="">8. Thay đổi địa điểm/thị trường kinh doanh</label>
              <label for="">9. Lý do khác: ghi rõ</label>
            </div>
            <div class="YTAH-check">
                    <input type="checkbox" id="DanhSachNhanToAnhHuong_0" name="DanhSachNhanToAnhHuong_0" value="01" />
                    <input type="checkbox" id="DanhSachNhanToAnhHuong_1" name="DanhSachNhanToAnhHuong_1" value="02" />
                    <input type="checkbox" id="DanhSachNhanToAnhHuong_2" name="DanhSachNhanToAnhHuong_2" value="03" />
                    <input type="checkbox" id="DanhSachNhanToAnhHuong_3" name="DanhSachNhanToAnhHuong_3" value="04" />
                    <input type="checkbox" id="DanhSachNhanToAnhHuong_4" name="DanhSachNhanToAnhHuong_4" value="05" />
                    <input type="checkbox" id="DanhSachNhanToAnhHuong_5" name="DanhSachNhanToAnhHuong_5" value="06"/>
                    <input type="checkbox" id="DanhSachNhanToAnhHuong_6" name="DanhSachNhanToAnhHuong_6" value="07" />
                    <input type="checkbox" id="DanhSachNhanToAnhHuong_7" name="DanhSachNhanToAnhHuong_7" value="08" />
               @if(Model.NhanToThu9==null){
              <input type="checkbox" id="YT9" value="" />
               }else{
                   <input type="checkbox" checked id="YT9" value="" />
               }
            </div>
          </div>
          <div class="YTAH9">
            <textarea asp-for="@Model.NhanToThu9.NoiDung"
              class="form-control"
              rows="1"
              id="comment"
              name="NhanToThu9.NoiDung"
              readonly
            ></textarea>
          </div>
        </div>
        <div class="form-group uname-info">
          <div class="row">
            <label class="uname-lb">Họ tên người trả lời:</label>
            <input type="text" name="Master.TenNguoiTraLoi" asp-for="@Model.Master.TenNguoiTraLoi" class="infoma" />
          </div>
          <div class="row">
            <label class="uname-lb">Số điện thoại:</label>
            <input type="text" name="Master.SdtnguoiTraLoi" asp-for="@Model.Master.SdtnguoiTraLoi" class="infoma" />
          </div>
        </div>
        <div class="group-btn" style="justify-content: end;">
          <select name="loai" style="margin-right:10px">
              <option value="0">Chọn file cần xuất</option>
              <option value="1">Xuất File PDF</option>
              <option value="2">Xuất File Excel</option>
              <option value="3">Xuất cả 2</option>
          </select>
          <button type="submit" value="false" class="btn btn-primary">Lưu</button>
        </div>
<script type="text/javascript">
$('.infomal').on('blur', format);
function format(){
    if(checkNumber(this.value)){
        const value = this.value.replace(/,/g, '');
        this.value = parseFloat(value).toLocaleString('en-US', {
        style: 'decimal',
            maximumFractionDigits: 2,
            minimumFractionDigits: 2
            })
    }
}

     function changeThthangTruoc(tt){

        var value = getValue($('#ThthangTruoc'+tt).val());

        if(checkNumber(value)){
            var stt = $('#stt'+tt).val();        
            var mst = $('#macoso').val();
            var duTinh = $('#DuTinh'+tt).val();
            var thangDuTinh = $('#phieuThang').val();
            var nam = $('#phieuNam').val();
            $.ajax({
                type: 'POST',
                url: '/get-tong2_3',
                data: "mast=" + mst + "&stt="+stt+"&thangTrc="+value+"&duTinh="+duTinh+"&thangDuTinh="+thangDuTinh+"&nam="+nam,
                success: function (result) {
                    $('#TongCongDon'+tt).val(
                        parseFloat(result).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
                    );
                    changeCongDon(result,tt);
                },
               error: function (result) {
               alert('Mã số thuế không tồn tại!');
             }
            });
         }
         if(tt.length > 1){
            var cutstt = tt.substring(0,1);
        if ((cutstt === '7' && tt.includes('_') == 1) || (cutstt === '6' && tt.includes('_')) || (cutstt === '8' && tt.includes('_')) || (cutstt === '14' && tt.includes('_'))|| (cutstt === '15' && tt.includes('_'))|| (cutstt === '16' && tt.includes('_'))) {
            if (getValue($('#ThthangTruoc'+tt).val()) > getValue($('#ThthangTruoc' + cutstt).val())) {
              $('#ThthangTruoc' + tt)[0].setCustomValidity("Giá trị phải nhỏ hơn " + $('#ThthangTruoc' + cutstt).val());
            } else {
              $('#ThthangTruoc'+tt)[0].setCustomValidity("");
            }
        }
        }else{
            if ((String(tt) === '7') || (String(tt) === '6') || (String(tt) === '8') || (String(tt) === '14')|| (String(tt) === '15')|| (String(tt) === '16')) {
            if (getValue($('#ThthangTruoc'+tt+'_1').val()) > getValue($('#ThthangTruoc' + tt).val())) {
              $('#ThthangTruoc' + tt+'_1')[0].setCustomValidity("Giá trị phải nhỏ hơn " + $('#ThthangTruoc' + tt).val());
            } else {
              $('#ThthangTruoc'+tt+'_1')[0].setCustomValidity("");
            }
            if($('#ThthangTruoc'+tt+'_2').length){
                if (getValue($('#ThthangTruoc'+tt+'_2').val()) > getValue($('#ThthangTruoc' + tt).val())) {
              $('#ThthangTruoc' + tt+'_2')[0].setCustomValidity("Giá trị phải nhỏ hơn " + $('#ThthangTruoc' + tt).val());
            } else {
              $('#ThthangTruoc'+tt+'_2')[0].setCustomValidity("");
            }
            }


        }
        }
         }
          
        
    
    function changeDuTinh(tt){


        var value = parseFloat($('#DuTinh'+tt).val());

        if(checkNumber(value)){
            var stt = $('#stt'+tt).val();        
            var mst = $('#macoso').val();
            var duTinh = $('#ThthangTruoc'+tt).val();
            var thangDuTinh = $('#phieuThang').val();
            var nam = $('#phieuNam').val();
            $.ajax({
                type: 'POST',
                url: '/get-tong2_3',
                data: "mast=" + mst + "&stt="+stt+"&thangTrc="+value+"&duTinh="+duTinh+"&thangDuTinh="+thangDuTinh+"&nam="+nam,
                success: function (result) {
                    $('#TongCongDon'+tt).val(
                        parseFloat(result).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
                    );
                    changeCongDon(result,tt);
                },
               error: function (result) {
               alert('Mã số thuế không tồn tại!');
             }
            });
          }
          if(tt.length > 1){
            var cutstt = tt.substring(0,1);
        if ((cutstt === '7' && tt.includes('_') == 1) || (cutstt === '6' && tt.includes('_')) || (cutstt === '8' && tt.includes('_')) || (cutstt === '14' && tt.includes('_'))|| (cutstt === '15' && tt.includes('_'))|| (cutstt === '16' && tt.includes('_'))) {
            if (getValue($('#DuTinh'+tt).val()) > getValue($('#DuTinh' + cutstt).val())) {
              $('#DuTinh' + tt)[0].setCustomValidity("Giá trị phải nhỏ hơn " + $('#DuTinh' + cutstt).val());
            } else {
              $('#DuTinh'+tt)[0].setCustomValidity("");
            }
        }
        }else{
            if ((String(tt) === '7') || (String(tt) === '6') || (String(tt) === '8') || (String(tt) === '14')|| (String(tt) === '15')|| (String(tt) === '16')) {
            if (getValue($('#DuTinh'+tt+'_1').val()) > getValue($('#DuTinh' + tt).val())) {
              $('#DuTinh' + tt+'_1')[0].setCustomValidity("Giá trị phải nhỏ hơn " + $('#DuTinh' + tt).val());
            } else {
              $('#DuTinh'+tt+'_1')[0].setCustomValidity("");
            }
            if($('#DuTinh'+tt+'_2').length){
                if (getValue($('#DuTinh'+tt+'_2').val()) > getValue($('#DuTinh' + tt).val())) {
              $('#DuTinh' + tt+'_2')[0].setCustomValidity("Giá trị phải nhỏ hơn " + $('#DuTinh' + tt).val());
            } else {
              $('#DuTinh'+tt+'_2')[0].setCustomValidity("");
            }
            }


        }
        }
          }


         

         
          
        
        
    


    function checkNumber(str) {
        return /[0-9,.\-$]+/.test(str);
    }
    function getValue(str){
       return Number(str.replace(/[^0-9.-]+/g,""));
    }

   $(".MS").keyup(function() {

        var valueArr = [];
                document.querySelectorAll('.MS').forEach(function(el){
                valueArr.push(el.value);
            });
        strMS = "";
        valueArr.forEach(AddMS)
        $('#MST1').val(strMS);
        if(strMS.length==13){
                $.ajax({
                    type: 'POST',
                    url: '/loadMasterCN',
                    data: "ms=" + strMS,
                    success: function (result) {
                        $('#ThongTinDoanhNghiepGroup').replaceWith(result);
                    },
                    error: function (result) {
                        alert('Mã số thuế không tồn tại!');
                    }
            });
        }
    });
    $(document).ready(function(){
          let ms = $('#Maphieu').val();
          let mst = $('#macoso').val();
          if(ms!=undefined){
                $.ajax({
                    type: 'POST',
                    url: '/loadMaster2_3',
                    data: "ms=" + ms +"&mcs=" + mst,
                    success: function (result) {
                        $('#ThongTinDoanhNghiepGroup').replaceWith(result);
                    },
                    error: function (result) {
                        alert('Mã số thuế không tồn tại!');
             }
            });
          }
            var a = [@Html.Raw(getArray())];
            a.forEach(myFunction);
            $('.infomal').each(format);
    })
    $(window).scroll(function(){

    })
    function myFunction(item, index) {
        for(var i =0 ;i<=7;i++){
                if($('#DanhSachNhanToAnhHuong_'+i).val()== item){
                    $('#DanhSachNhanToAnhHuong_'+i).prop('checked', true);
                }
        }
    }

   function doiPhieu(mcs){
        var thang = $('#phieuThang').val();
        var nam = $('#phieuNam').val();
        var s = "@Html.Raw(ViewBag.LoaiPhieu)";

        $.ajax({
                    type: 'POST',
                    url: '/changePhieu2_3',
                    data: "thang=" + thang + "&nam="+nam + "&mcs="+mcs,
                    success: function (result) {
                        $('#form').replaceWith(result);
                            let kq = "@User.IsInRole("001")"
                            if(kq=="True"){
                                $('#bodyDiv').addClass("col-lg-12");
                                $('#form').addClass("form");
                                $('#tableQLTT').css("display","block");
                                $('.MS').prop('readonly', false);
                            }else{
                                $('#tableQLTT').css("display","none");
                                $('#form').addClass("form1");
                                $('.MS').prop('readonly', true);
                            }
                    },
                    error: function (result) {
                        alert('Mã số thuế không tồn tại!');
             }
          });
    }
    $(".MS").keyup(function (e) {
      if (this.value.length === this.maxLength) {
        var next = $(this).data("next");
        if (next === 13) {
        } else {
          var check = document.getElementById("n" + next).value;
          if (check !== "") {
          } else {
            document.getElementById("n" + next).focus();
          }
        }
      }
    });
    $("#YT9").change(function () {
      if (this.checked) {
        $('#comment').prop('readonly', false);
      } else {
        $('#comment').prop('readonly', true);
      }
    });
    $("#5").click(function () {
      $(".changed1").toggle(this.checked);
    });
    $("#5-1").click(function () {
      $(".changed1").toggle(this.check);
    });
    $("#13").click(function () {
      $(".changed2").toggle(this.checked);
    });
    $("#13-1").click(function () {
      $(".changed2").toggle(this.check);
    });

    function th9(){
        let th6 = document.getElementById('ThthangTruoc6').value;
        let th7 = document.getElementById('ThthangTruoc7').value;
        let t9 =  parseFloat(th6) * parseFloat(th7);

        
         $("#ThthangTruoc9").val(
                parseFloat(t9).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }
     
    function dt9(){
        let dt6 = document.getElementById('DuTinh6').value;
        let dt7 = document.getElementById('DuTinh7').value;
        let d9 =  parseFloat(dt6) * parseFloat(dt7);

        
         $("#DuTinh9").val(
                parseFloat(d9).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

    function th9_1(){
        let th6_1 = document.getElementById('ThthangTruoc6_1').value;
        let th7_1 = document.getElementById('ThthangTruoc7_1').value;
        let t9_1 =  parseFloat(th6_1) * parseFloat(th7_1);

        
         $("#ThthangTruoc9_1").val(
                parseFloat(t9_1).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

    function dt9_1(){
        let dt6_1 = document.getElementById('DuTinh6_1').value;
        let dt7_1 = document.getElementById('DuTinh7_1').value;
        let d9_1 =  parseFloat(dt6_1) * parseFloat(dt7_1);

        
         $("#DuTinh9_1").val(
               parseFloat(d9_1).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

    function th10(){
        let th9 = document.getElementById('ThthangTruoc9').value;
        let th8 = document.getElementById('ThthangTruoc8').value;
        let t10 =  parseFloat(th9) * parseFloat(th8);


         $("#ThthangTruoc10").val(
                parseFloat(t10).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

     function dt10(){
        let dt9 = document.getElementById('DuTinh9').value;
        let dt8 = document.getElementById('DuTinh8').value;
        let d10 =  parseFloat(dt9) * parseFloat(dt8);

        
         $("#DuTinh10").val(
                parseFloat(d10).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

    function th10_1(){
        let th9_1 = document.getElementById('ThthangTruoc9_1').value;
        let th8_1 = document.getElementById('ThthangTruoc8_1').value;
        let t10_1 =  parseFloat(th9_1) * parseFloat(th8_1);


         $("#ThthangTruoc10_1").val(
                parseFloat(t10_1).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }
     function dt10_1(){
        let dt9_1 = document.getElementById('DuTinh9_1').value;
        let dt8_1 = document.getElementById('DuTinh8_1').value;
        let d10_1 =  parseFloat(dt9_1) * parseFloat(dt8_1);

        
         $("#DuTinh10_1").val(
                parseFloat(d10_1).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

    function th17(){
        let th14 = document.getElementById('ThthangTruoc14').value;
        let th15 = document.getElementById('ThthangTruoc15').value;
        let t17 =  parseFloat(th14) * parseFloat(th15);


         $("#ThthangTruoc17").val(
                parseFloat(t17).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

    function dt17(){
        let dt14 = document.getElementById('DuTinh14').value;
        let dt15 = document.getElementById('DuTinh15').value;
        let d17 =  parseFloat(dt14) * parseFloat(dt15);


         $("#DuTinh17").val(
                parseFloat(d17).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

    function th17_1(){
        let th14_1 = document.getElementById('ThthangTruoc14_1').value;
        let th15_1 = document.getElementById('ThthangTruoc15_1').value;
        let t17_1 =  parseFloat(th14_1) * parseFloat(th15_1);


         $("#ThthangTruoc17_1").val(
                parseFloat(t17_1).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

    function dt17_1(){
        let dt14_1 = document.getElementById('DuTinh14_1').value;
        let dt15_1 = document.getElementById('DuTinh15_1').value;
        let d17_1 =  parseFloat(dt14_1) * parseFloat(dt15_1);


         $("#DuTinh17_1").val(
               parseFloat(d17_1).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

    function th18(){
        let th16 = document.getElementById('ThthangTruoc16').value;
        let th17 = document.getElementById('ThthangTruoc17').value;
        let t18 =  parseFloat(th16) * parseFloat(th17);


         $("#ThthangTruoc18").val(
                parseFloat(t18).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

     function dt18(){
        let dt16 = document.getElementById('DuTinh16').value;
        let dt17 = document.getElementById('DuTinh17').value;
        let d18 =  parseFloat(dt16) * parseFloat(dt17);


         $("#DuTinh18").val(
                parseFloat(d18).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }

    function th18_1(){
        let th16_1 = document.getElementById('ThthangTruoc16_1').value;
        let th17_1 = document.getElementById('ThthangTruoc17_1').value;
        let t18_1 =  parseFloat(th16_1) * parseFloat(th17_1);


         $("#ThthangTruoc18_1").val(
                parseFloat(t18_1).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }
     function dt18_1(){
        let dt16_1 = document.getElementById('DuTinh16_1').value;
        let dt17_1 = document.getElementById('DuTinh17_1').value;
        let d18_1 =  parseFloat(dt16_1) * parseFloat(dt17_1);


         $("#DuTinh18_1").val(
                parseFloat(d18_1).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
            );
    }
</script>
      </form>