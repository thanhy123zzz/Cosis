@model Cosis.Models.PhieuDieuTra
@{
    Layout = null;
    FormCosisContext context = new FormCosisContext();
    int getThang()
    {
        return DateTime.Now.Month;
    }
    string getThangTruoc(string m)
    {
        int i = Int32.Parse(m);
        if (i == 1)
        {
            return "12";
        }
        else
        {
            return toStringMonth(i - 1);
        }
    }
    string getTinh(string ma)
    {
        return context.TinhTp.Find(ma).Name;
    }
    string getHuyen(string ma)
    {
        return context.QuanHuyen.Find(ma).Name;
    }
    string getXa(string ma)
    {
        return context.PhuongXa.Find(ma).Name;
    }
    int getNam()
    {
        return DateTime.Now.Year;
    }
    string getThangNamTruoc()
    {
        if (getThang() == 1)
            return "12/" + (getNam() - 1);
        else
        {
            return (getThang() - 1) + "/" + getNam();
        }
    }
    List<Master> getMasters()
    {
        return context.Master.ToList();
    }

    string toStringMonth(int i)
    {
        if (i.ToString().Length > 1) return i.ToString();
        else return "0" + i;
    }

    string toStringMonthAndYear(int m, int year)
    {
        if (m == 1)
        {
            return 12 + "/" + (year - 1).ToString();
        }
        else
        {
            return toStringMonth(m - 1) + "/" + year;
        }
    }
    List<NganhKinhDoanh> getNganhKinhDoanh(string mcs)
    {
        return context.NganhKinhDoanh.Where(x => x.MaCoSo == mcs).ToList();
    }

    NganhHoatDongKinhDoanh getNganhHoatDongKinhDoanh(string ma)
    {
        return context.NganhHoatDongKinhDoanh.Where(x => x.MaNganh == ma).FirstOrDefault();
    }
    string getArray()
    {
        if (Model.DanhSachNhanToAnhHuong != null)
        {
            string a = "";
            foreach (DanhSachNhanToAnhHuong l in Model.DanhSachNhanToAnhHuong)
            {
                a = a + "'" + l.MaAh.Trim() + "', ";
            }
            return a;
        }
        else
        {
            return "";
        }

    }
    NhanToAnhHuong nhanToAnhHuong(string ma)
    {
        return context.NhanToAnhHuong.Find(ma);
    }
    string format(decimal? a)
    {
        return a?.ToString("N", System.Globalization.CultureInfo.InvariantCulture);

    }
    List<NganhKinhDoanh> list;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet"
          href="~/assets/bootstrap-4.5.3-dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/assets/main.css" />
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
    <!--Form -->
    <div class="container">
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
      <form id="form" class="form1" action="/form1_1" method="post" enctype="multipart/form-data">
        <div class="form-group text-center">
          <label> <b>ĐIỀU TRA HOẠT ĐỘNG THƯƠNG MẠI VÀ DỊCH VỤ</b> </label>
        </div>
        <div class="form-group MSTP-info">
          <label class="P-name"><b>Phiếu 2.3/CT-VT-T</b></label>
    
        </div>
        <div class="form-group text-center">
          <label class="text-center">
            <b>PHIẾU THU THẬP THÔNG TIN ĐỐI VỚI CƠ SỞ KINH DOANH CÁ THỂ</b>
          </label>
          <label>
            <b>
              <i>
                (Áp dụng đối với cơ sở kinh doanh cá thể có hoạt động vận tải, kho bãi)
              </i>
            </b>
          </label>
        </div>

        <div class="form-group text-center">
          <div class="row"></div>
          <div>
            <label> <b>Tháng @ViewBag.thang Năm @ViewBag.nam</b> </label>
          </div>
          <div class="row"></div>
        </div>
        <div class="form-group m-title text-center">
          <h5 style="margin-top: .5rem;"><b>A. THÔNG TIN CHUNG</b></h5>
        </div>
            @if (Model.Master != null)
            {
                            <div id="ThongTinDoanhNghiepGroup" class="form-group">
                 <div class="adress">

                        <div class="adress-detail">
                          <div class="row">
                            <label class="lb-info">Tỉnh/TP trực thuộc TW: </label>
                                <label>@getTinh(Model.Master.MaTinhTp)</label>
                          </div>
                          <div class="row">
                            <label class="lb-info"
                  >Huyện/quận <i>(thị xã, TP thuộc tỉnh)</i>:
                            </label>
                               <label>@getHuyen(Model.Master.MaQuanHuyen)</label>
                          </div>
                          <div class="row">
                            <label class="lb-info">Xã/phường/thị trấn: </label>
                                <label>@getXa(Model.Master.MaPhuongXa)</label>
                          </div>

                        </div>
                      </div>
              <div class="row">
                <label class="lb-info">Địa bàn: </label>
                <label>@Model.Master.DiaChiCuThe - @getXa(Model.Master.MaPhuongXa) - @getHuyen(Model.Master.MaQuanHuyen) - @getTinh(Model.Master.MaTinhTp)</label>
              </div>
                    @if (Model.Master == null)
                    {
                                      <div class="row">
                                        <label class="lb-info">Mã cơ sở: </label>
                                        <input type="text" id="macoso" maxlength="5" class="infoma" required readonly autofocus/>
                                      </div>
                    }
                    else
                    {
                                           <div class="row">
                                            <label class="lb-info">Mã cơ sở: </label>
                                            <label >@Model.Master.MaCoSo</label>
                                          </div>
                    }
              <div class="row">
                <label class="lb-info">Tên cơ sở: </label>
                
                <label>@Model.Master.Ten</label>
                </div>
                    @if (Model.Master.MaSoThue == null && Model.Master.MaSoThue2 == null)
                    {
                                <div class="row">
                            <label class="lb-info">Mã số thuế</label>
                            <input type="text" value="" id="n0" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="1" autofocus/>
                            <input type="text" value="" id="n1" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="2" />
                            <input type="text" value="" id="n2" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="3" />
                            <input type="text" value="" id="n3" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="4" />
                            <input type="text" value="" id="n4" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="5" />
                            <input type="text" value="" id="n5" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="6" />
                            <input type="text" value="" id="n6" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="7" />
                            <input type="text" value="" id="n7" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="8" />
                            <input type="text" value="" id="n8" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="9" />
                            <input type="text" value="" id="n9" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="10" />

                            <input type="text" value="" id="n10" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="11" />
                            <input type="text" value=""  id="n11" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="12" />
                            <input type="text" value="" id="n12" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="13" />
                          </div>
                    }
                    else
                    {
                                <div class="row">
                            <label class="lb-info">Mã số thuế</label>
                            <input type="text" value="@Model.Master.MaSoThue.Substring(0,1)" id="n0" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="1" autofocus/>
                            <input type="text" value="@Model.Master.MaSoThue.Substring(1,1)" id="n1" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="2" />
                            <input type="text" value="@Model.Master.MaSoThue.Substring(2,1)" id="n2" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="3" />
                            <input type="text" value="@Model.Master.MaSoThue.Substring(3,1)" id="n3" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="4" />
                            <input type="text" value="@Model.Master.MaSoThue.Substring(4,1)" id="n4" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="5" />
                            <input type="text" value="@Model.Master.MaSoThue.Substring(5,1)" id="n5" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="6" />
                            <input type="text" value="@Model.Master.MaSoThue.Substring(6,1)" id="n6" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="7" />
                            <input type="text" value="@Model.Master.MaSoThue.Substring(7,1)" id="n7" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="8" />
                            <input type="text" value="@Model.Master.MaSoThue.Substring(8,1)" id="n8" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="9" />
                            <input type="text" value="@Model.Master.MaSoThue.Substring(9,1)" id="n9" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="10" />

                            <input type="text" value="@Model.Master.MaSoThue2.Substring(0,1)" id="n10" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="11" />
                            <input type="text" value="@Model.Master.MaSoThue2.Substring(1,1)"  id="n11" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="12" />
                            <input type="text" value="@Model.Master.MaSoThue2.Substring(2,1)" id="n12" maxlength="1" size="1" class="text-center MS" autocomplete="off" data-next="13" />
                          </div>
                    }
              <div class="row">
                <label class="lb-info">Thôn, ấp<i>(số nhà, đường phố)</i>: </label>
                
                <label>@Model.Master.DiaChiCuThe</label>
              </div>

              <div class="row">
                <label class="lb-info">Số điện thoại: </label>
               
                <label>@Model.Master.Sdt</label>
              </div>
              <div class="row">
                <label class="lb-info">Email: </label>
               
                <label>@Model.Master.Email</label>
              </div>
              <div class="loaihinh">
                <label>Loại hình kinh tế</label>

                <div class="checkbox-tt">
                  <label> 1.Kinh tế nhà nước</label>
                  <label> 2.Kinh tế ngoài nhà nước</label>
                  <label> 3.Kinh tế có vốn đầu tư trực tiếp nước ngoài</label>
                </div>
                <div class="checkbox">
                            @if (@Model.Master.MaLh.Trim() == "01")
                            {
                                <input type="radio" checked name="Master.MaLh" value="01" />
                            }
                            else
                            {
                                <input disabled type="radio" name="Master.MaLh" value="01" />
                            }
                            @if (@Model.Master.MaLh.Trim() == "02")
                            {
                                <input type="radio" checked name="Master.MaLh" value="02" />
                            }
                            else
                            {
                                <input disabled type="radio" name="Master.MaLh" value="02" />
                            }

                            @if (@Model.Master.MaLh.Trim() == "03")
                            {
                                <input type="radio" checked name="Master.MaLh" value="03" />
                            }
                            else
                            {
                                <input disabled type="radio" name="Master.MaLh" value="03" />
                            }
                </div>
              </div>
              <div class="nganhKD row">
                <label class="nganh-lb" for="">Ngành hoạt động kinh doanh</label>
                        @foreach (NganhKinhDoanh nganh in getNganhKinhDoanh(@Model.Master.MaCoSo))
                        {
                              <div class="nganh-ct">
                                <div class="row">
                                  <div class="MNHD row">
                                    <input readonly value="@nganh.MaNganh.Substring(0,1)" type="text" maxlength="1" size="1" class="text-center MN" />
                                    <input readonly value="@nganh.MaNganh.Substring(1,1)" type="text" maxlength="1" size="1" class="text-center MN" />
                                    <input readonly value="@nganh.MaNganh.Substring(2,1)" type="text" maxlength="1" size="1" class="text-center MN" />
                                    <input readonly value="@nganh.MaNganh.Substring(3,1)" type="text" maxlength="1" size="1" class="text-center MN" />
                                    <input readonly value="@nganh.MaNganh.Substring(4,1)" type="text" maxlength="1" size="1" class="text-center MN" />
                                  </div>
                                  <label for="">Tên ngành HĐKD:</label>
                                  
                                  <label>@getNganhHoatDongKinhDoanh(nganh.MaNganh).TenNganh</label>
                                </div>
                              </div>
                        }
              </div>
            </div>
                            <script>
                                        var citis = document.getElementById("city");
                                        var districts = document.getElementById("district");
                                        var wards = document.getElementById("ward");

                                        var Parameter = {
                                          url: "https://localhost:44358/assets/DiaChi.json", 
                                          method: "GET", 
                                          responseType: "application/json", 
                                        };
                                        var promise = axios(Parameter);
                                        promise.then(
                                            function (result) {
                                            renderCity(result.data);
                                        });
                                        function renderCity(data) {
                                          for (const x of data) {
                                              if(x.Id == @Html.Raw(Model.Master.MaTinhTp.Trim())){
                                                    citis.options[citis.options.length] = new Option(x.Name, x.Id,true,true);
                                                    const result = data.filter(n => n.Id === x.Id);

                                                    for (const k of result[0].Districts) {
                                                        if(k.Id == @Html.Raw(Model.Master.MaQuanHuyen.Trim())){
                                                            district.options[district.options.length] = new Option(k.Name, k.Id,true,true);
                                                            const dataCity = data.filter((n) => n.Id === citis.value);
                                                            const dataWards = dataCity[0].Districts.filter(n => n.Id === k.Id)[0].Wards;
                                                              for (const w of dataWards) {
                                                                  if(w.Id==@Html.Raw(Model.Master.MaPhuongXa.Trim())){
                                                                    wards.options[wards.options.length] = new Option(w.Name, w.Id,true,true);
                                                                  }else{
                                                                      wards.options[wards.options.length] = new Option(w.Name, w.Id);
                                                                  }
                                                              }
                                                        }else{
                                                            district.options[district.options.length] = new Option(k.Name, k.Id);
                                                        }
                                                    }
                                              }else{
                                                  citis.options[citis.options.length] = new Option(x.Name, x.Id);
                                              }
                                          }
                                        citis.onchange = function () {
                                            district.length = 1;
                                            ward.length = 1;
                                            if(this.value != ""){
                                              const result = data.filter(n => n.Id === this.value);

                                              for (const k of result[0].Districts) {
                                                district.options[district.options.length] = new Option(k.Name, k.Id);
                                              }
                                            }
                                          };
                                          district.onchange = function () {
                                            ward.length = 1;
                                            const dataCity = data.filter((n) => n.Id === citis.value);
                                            if (this.value != "") {
                                              const dataWards = dataCity[0].Districts.filter(n => n.Id === this.value)[0].Wards;

                                              for (const w of dataWards) {
                                                    wards.options[wards.options.length] = new Option(w.Name, w.Id);
                                              }
                                            }
                                          };
                                        }
                                </script>
            }
    <div class="form-group m-title text-center">
          <h5 style="margin-top: .5rem;"><b>B. KẾT QUẢ HOẠT ĐỘNG KINH DOANH</b></h5>
        </div>
                   <table class="table table-striped table-hover table-bordered" id="tab-KQ">
                  <thead>
                    <tr class="text-center">
                      <th>Chi tiết Index</th>
                      <th>Đơn vị tính</th>
                      <th style="width:20%;"><b>Tháng thực hiện @toStringMonthAndYear(Int32.Parse(ViewBag.thang),Int32.Parse(ViewBag.nam))</b></th>
                      <th style="width:20%;"><b>Dự tính @toStringMonth(Int32.Parse(ViewBag.thang))/@ViewBag.nam</b></th>
                      <th style="width:20%;">
                        <b>Cộng dồn từ đầu năm đến cuối tháng @toStringMonth(Int32.Parse(ViewBag.thang))/@ViewBag.nam</b>
                    </tr>
                  </thead>
                     <tbody id="table-data">
                <tr class="text-center">
                  <td>A</td>
                  <td>B</td>
                  <td>1</td>
                  <td>2</td>
                  <td>3</td>
                </tr>
                <tr>
                  <td>
                    1.Index Ông/bà vui lòng cho biết tổng số tiền thu về (bao gồm cả vốn
                    và lãi) của cơ sở trong [tháng trước] và [tháng báo cáo] là bao
                    nhiêu?
                     
                  </td>
                  <td class="text-center">Triệu đồng
                   
                  </td>
                  <td><input type="text" id="ThthangTruoc0" oninput="changeThthangTruoc(0)" value="@format(Model.Detail[0].ThthangTruoc)" name="Detail[0].ThthangTruoc" class="infomal" /></td>
                  <td><input type="text" id="DuTinh0" oninput="changeDuTinh(0)" value="@format(Model.Detail[0].DuTinh)" name="Detail[0].DuTinh" class="infomal" /></td>
                      <td><input type="text" id="TongCongDon0" value="@format(Model.Detail[0].TongCongDon)" name="Detail[0].TongCongDon" class="infomal" /></td>
                </tr>
                    @{
                        list = getNganhKinhDoanh(Model.Master.MaCoSo);
                        int i = 0;
                        int countDetails = 1;

                        for (int item = 1; item < (list.Count+1); item++)
                        {
                                                        <tr>
                                                          <td>
                                                            2.@countDetails Trong tổng số tiền thu về của cơ sở, số tiền thu về do cung
                                                                                cấp dịch vụ <b>@getNganhHoatDongKinhDoanh(list[item-1].MaNganh).TenNganh</b> của [tháng trước] và [tháng báo
                                                            cáo] là bao nhiêu?
                                                                                
                                                                                 

                                                          </td>
                                              <td class="text-center">Triệu đồng
                                              <input type="hidden" name="Detail[@countDetails].Dvt" value="@countDetails Triệu đồng"/>
                                              </td>

                                                           <td><input type="text" id="ThthangTruoc2_@(countDetails)" value="@format(Model.Detail[countDetails].ThthangTruoc)" oninput="changeThthangTruoc('2_@(countDetails)')" name="Detail[@(countDetails)].ThthangTruoc" class="infomal" /></td>
                                                           <td><input type="text" id="DuTinh2_@(countDetails)" value="@format(Model.Detail[countDetails].DuTinh)"  oninput="changeDuTinh('2_@(countDetails)')" name="Detail[@(countDetails)].DuTinh" class="infomal" /></td>
                                                           <td><input type="text" id="TongCongDon2_@(countDetails)" value="@format(Model.Detail[countDetails].TongCongDon)" name="Detail[@(countDetails)].TongCongDon" class="infomal" /></td>
                                        </tr>
                            i++;
                            countDetails++;
                        }

                                <tr class="text-left">
                                  <td colspan="5">I. HOẠT ĐỘNG VẬN TẢI HÀNH KHÁCH</td>

                                </tr>
                                <tr>

                                  <td>
                                    3. Cơ sở có bao nhiêu phương tiện đang sử dụng để phục vụ cho
                                    hoạt động vận tải hành khách trong [tháng trước] và dự tính
                                    [tháng báo cáo]?
                                        
                                  </td>
                                  <td class="text-center">Cái
                                         
                                  </td>
                                     <td><input type="text" id="ThthangTruoc3" oninput="changeThthangTruoc(3)" value="@format(Model.Detail[(countDetails)].ThthangTruoc)" name="Detail[@(countDetails)].ThthangTruoc" class="infomal" /></td>
                                                       <td><input type="text" id="DuTinh3" oninput="changeDuTinh(3)" value="@format(Model.Detail[countDetails].DuTinh)" name="Detail[@(countDetails)].DuTinh" class="infomal" /></td>
                                       <td></td>
                                </tr>
                                <tr class="text-left">

                                  <td>
                                    4. @(countDetails + 1) Tổng số ghế của tất cả các phương tiện trên là bao nhiêu?
                                         <input type="hidden" id="stt4" name="Detail[@(countDetails+1)].Stt" value="4."/>
                                         <input type="hidden" name="Detail[@(countDetails+1)].TenCt" value="Tổng số ghế của tất cả các phương tiện trên là bao nhiêu?"/>  
                                  </td>
                                  <td class="text-center">Ghế
                                               <input type="hidden" name="Detail[@(countDetails+1)].Dvt" value="@(countDetails+1) ghế"/>
                                   </td>
                                              <td><input type="text" id="ThthangTruoc4" oninput="changeThthangTruoc(4)" value="@format(Model.Detail[(countDetails+1)].ThthangTruoc)" name="Detail[@(countDetails+1)].ThthangTruoc" class="infomal" /></td>
                                      <td><input type="text" id="DuTinh4" oninput="changeDuTinh(4)" value="@format(Model.Detail[(countDetails+1)].DuTinh)" name="Detail[@(countDetails+1)].DuTinh" class="infomal" /></td>
                                              <td></td>
                                </tr>
                                <tr class="text-left">
                                      <td>5. @(countDetails + 2) Cơ sở có vận chuyển hành khách ngoài nước không?
                                          <input type="hidden" id="stt5" name="Detail[@(countDetails+2)].Stt" value="5."/>
                                              <input type="hidden" name="Detail[@(countDetails+2)].TenCt" value="Cơ sở có vận chuyển hành khách ngoài nước không?"/>  
                                      </td>
                                  <td></td>
                                  <td class="text-center">
                                    1. Có <input type="radio" name="chose1" id="5" />
                                  </td>
                                  <td class="text-center">
                                    2. Không <input type="radio" name="chose1" id="5-1" />
                                  </td>
                                </tr>
                        <tr class="text-left">
                            <td>
                                6. Số chyến vận chuyển khách trong [tháng trước] và [tháng báo
                                cáo] của cơ sở là bao nhiêu?
                                    <input type="hidden" id="stt6" name="Detail[@(countDetails+2)].Stt" value="6."/>
                                    <input type="hidden" name="Detail[@(countDetails+2)].TenCt" value="Số chyến vận chuyển khách trong [tháng trước] và [tháng báo
                                cáo] của cơ sở là bao nhiêu?"/>  
                            </td>
                            <td class="text-center">Chuyến
                                     <input type="hidden" name="Detail[@(countDetails+2)].Dvt" value="@(countDetails+2) Chuyến"/>
                            </td>
                            <td><input type="text" id="ThthangTruoc6" oninput="changeThthangTruoc(6)" value="@format(Model.Detail[(countDetails+2)].ThthangTruoc)" name="Detail[@(countDetails+2)].ThthangTruoc" class="infomal" /></td>
                            <td><input type="text" id="DuTinh6" oninput="changeDuTinh(6)" value="@format(Model.Detail[(countDetails+2)].DuTinh)" name="Detail[@(countDetails+2)].DuTinh" class="infomal" /></td>
                            <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                6.1 Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?
                                (Hiển thị nếu có câu 5 = 1 "CÓ")
                                     <input type="hidden" id="stt6_1" name="Detail[@(countDetails+3)].Stt" value="6.1."/>
                                     <input type="hidden" name="Detail[@(countDetails+3)].TenCt" value="Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?"/>
                            </td>
                            <td class="text-center">Chuyến
                                <input type="hidden" name="Detail[@(countDetails+3)].Dvt" value="@(countDetails+3) Chuyến"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc6_1" oninput="changeThthangTruoc('6_1')" value="@format(Model.Detail[(countDetails+3)].ThthangTruoc)" name="Detail[@(countDetails+3)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh6_1" oninput="changeDuTinh('6_1')" value="@format(Model.Detail[(countDetails+3)].DuTinh)" name="Detail[@(countDetails+3)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                7. Số khách bình quân/chuyến trong [tháng trước] và [tháng báo
                                cáo] là bao nhiêu?
                                    <input type="hidden" id="stt7" name="Detail[@(countDetails+4)].Stt" value="7."/>
                                    <input type="hidden" name="Detail[@(countDetails+4)].TenCt" value="Số khách bình quân/chuyến trong [tháng trước] và [tháng báo
                                cáo] là bao nhiêu?"/>
                            </td>
                            <td class="text-center">Hành khách
                                    <input type="hidden" name="Detail[@(countDetails+4)].Dvt" value="@(countDetails+4) Hành khách"/>
                            </td>
                            <td><input type="text" id="ThthangTruoc7" oninput="changeThthangTruoc(7)" value="@format(Model.Detail[(countDetails+4)].ThthangTruoc)" name="Detail[@(countDetails+4)].ThthangTruoc" class="infomal" /></td>
                            <td><input type="text" id="DuTinh7" oninput="changeDuTinh(7)" value="@format(Model.Detail[(countDetails+4)].DuTinh)" name="Detail[@(countDetails+4)].DuTinh" class="infomal" /></td>
                            <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                7.1 Trong đó, số khách bình quân 1 chuyến vận chuyển ngoài nước
                                là bao nhiêu?
                                     <input type="hidden" id="stt7_1" name="Detail[@(countDetails+5)].Stt" value="7.1."/>
                                     <input type="hidden" name="Detail[@(countDetails+5)].TenCt" value="Trong đó, số khách bình quân 1 chuyến vận chuyển ngoài nước
                                là bao nhiêu?"/>
                            </td>
                            <td class="text-center">Hành khách
                                <input type="hidden" name="Detail[@(countDetails+5)].Dvt" value="@(countDetails+5) Hành khách"/>
                             </td>
                                <td><input type="text" id="ThthangTruoc7_1" oninput="changeThthangTruoc('7_1')" value="@format(Model.Detail[(countDetails+5)].ThthangTruoc)" name="Detail[@(countDetails+5)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh7_1" oninput="changeDuTinh('7_1')" value="@format(Model.Detail[(countDetails+5)].DuTinh)" name="Detail[@(countDetails+5)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                8. Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                khách trong [tháng trước] và [tháng báo cáo] là bao nhiêu?
                                    <input type="hidden" id="stt8" name="Detail[@(countDetails+6)].Stt" value="8."/>
                                    <input type="hidden" name="Detail[@(countDetails+6)].TenCt" value="Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                khách trong [tháng trước] và [tháng báo cáo] là bao nhiêu?"/>
                            </td>
                            <td class="text-center">Km
                                 <input type="hidden" name="Detail[@(countDetails+6)].Dvt" value="@(countDetails+6) km"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc8" oninput="changeThthangTruoc(8)" value="@format(Model.Detail[(countDetails+6)].ThthangTruoc)" name="Detail[@(countDetails+6)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh8" oninput="changeDuTinh(8)"  value="@format(Model.Detail[(countDetails+6)].DuTinh)" name="Detail[@(countDetails+6)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                8.1 Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                bao nhiêu?
                                    <input type="hidden" id="stt8_1" name="Detail[@(countDetails+7)].Stt" value="8.1."/>
                                    <input type="hidden" name="Detail[@(countDetails+7)].TenCt" value="Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                bao nhiêu?"/>
                            </td>
                            <td class="text-center">Km
                                <input type="hidden" name="Detail[@(countDetails+7)].Dvt" value="@(countDetails+7) km"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc8_1" oninput="changeThthangTruoc('8_1')" value="@format(Model.Detail[(countDetails+7)].ThthangTruoc)" name="Detail[@(countDetails+7)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh8_1" oninput="changeDuTinh('8_1')" value="@format(Model.Detail[(countDetails+7)].DuTinh)" name="Detail[@(countDetails+7)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>9. SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN
                                 <input type="hidden" id="stt9" name="Detail[@(countDetails+8)].Stt" value="9."/>
                                 <input type="hidden" name="Detail[@(countDetails+8)].TenCt" value="SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN"/>
                            </td>
                            <td class="text-center">Hành khách
                                 <input type="hidden" name="Detail[@(countDetails+8)].Dvt" value="@(countDetails+8) Hành khách"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc9" oninput="changeThthangTruoc(9)" value="@format(Model.Detail[(countDetails+8)].ThthangTruoc)" name="Detail[@(countDetails+8)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" id="DuTinh9" oninput="changeDuTinh(9)" value="@format(Model.Detail[(countDetails+8)].DuTinh)" name="Detail[@(countDetails+8)].DuTinh" class="infomal" /></td>
                                        <td></td>
                        </tr>
                        <tr class="">
                            <td>9.1 TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN NGOÀI NƯỚC
                                <input type="hidden" id="stt9_1" name="Detail[@(countDetails+9)].Stt" value="9.1."/>
                                <input type="hidden" name="Detail[@(countDetails+9)].TenCt" value="TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN CHUYỂN NGOÀI NƯỚC"/>
                            </td>
                            <td class="text-center">Hành khách
                                <input type="hidden" name="Detail[@(countDetails+9)].Dvt" value="@(countDetails+9) Hành khách"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc9_1" oninput="changeThthangTruoc('9_1')" value="@format(Model.Detail[(countDetails+9)].ThthangTruoc)" name="Detail[@(countDetails+9)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh9_1" oninput="changeDuTinh('9_1')" value="@format(Model.Detail[(countDetails+9)].DuTinh)" name="Detail[@(countDetails+9)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>10. SỐ LƯỢT HÀNH KHÁCH LUÂN CHUYỂN
                                <input type="hidden" id="stt10" name="Detail[@(countDetails+10)].Stt" value="10."/>
                                <input type="hidden" name="Detail[@(countDetails+10)].TenCt" value="SỐ LƯỢT HÀNH KHÁCH LUÂN CHUYỂN"/>
                            </td>
                            <td class="text-center">Hành khách.Km
                               <input type="hidden" name="Detail[@(countDetails + 10)].Dvt" value="@(countDetails + 10) Hành khách.km"/>
                            </td>
                            <td><input type="text" id="ThthangTruoc10" oninput="changeThthangTruoc(10)" value="@format(Model.Detail[(countDetails+10)].ThthangTruoc)" name="Detail[@(countDetails+10)].ThthangTruoc" class="infomal" /></td>
                            <td><input type="text" id="DuTinh10" oninput="changeDuTinh(10)" value="@format(Model.Detail[(countDetails+10)].DuTinh)" name="Detail[@(countDetails+10)].DuTinh" class="infomal" /></td>
                            <td></td>
                        </tr>
                        <tr class="text-left ">
                            <td>
                                10.1 TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN LUÂN CHUYỂN NGOÀI NƯỚC
                                (Hiển thị nếu câu 5=1 "CÓ")
                                    <input type="hidden" id="stt10_1" name="Detail[@(countDetails+11)].Stt" value="10.1."/>
                                    <input type="hidden" name="Detail[@(countDetails+11)].TenCt" value="TRONG ĐÓ, SỐ LƯỢT HÀNH KHÁCH VẬN LUÂN CHUYỂN NGOÀI NƯỚC"/>
                            </td>
                            <td class="text-center">Hành khách.Km
                                <input type="hidden" name="Detail[@(countDetails + 11)].Dvt" value="@(countDetails + 11) Hành khách.km"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc10_1" oninput="changeThthangTruoc('10_1')" value="@format(Model.Detail[(countDetails+11)].ThthangTruoc)" name="Detail[@(countDetails+11)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh10_1" oninput="changeDuTinh('10_1')" value="@format(Model.Detail[(countDetails+11)].DuTinh)" name="Detail[@(countDetails+11)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td colspan="5">II. HOẠT ĐỘNG VẬN TẢI HÀNG HÓA</td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                11. Cơ sở có bao nhiêu phương tiện đang sử dụng để phục vụ cho
                                hoạt dộng vận tải hàng hóa trong [tháng trước] và dự tính [tháng
                                báo cáo]?
                                    <input type="hidden" id="stt11" name="Detail[@(countDetails+12)].Stt" value="11."/>
                                    <input type="hidden" name="Detail[@(countDetails+12)].TenCt" value="Cơ sở có bao nhiêu phương tiện đang sử dụng để phục vụ cho
                                hoạt dộng vận tải hàng hóa trong [tháng trước] và dự tính [tháng
                                báo cáo]?"/>
                            </td>
                            <td class="text-center">Cái
                                <input type="hidden" name="Detail[@(countDetails + 12)].Dvt" value="@(countDetails + 12) Cái"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc11" oninput="changeThthangTruoc(11)" value="@format(Model.Detail[(countDetails+12)].ThthangTruoc)" name="Detail[@(countDetails+12)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh11" oninput="changeDuTinh(11)" value="@format(Model.Detail[(countDetails+12)].DuTinh)" name="Detail[@(countDetails+12)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                12. Tổng trọng tải của tất cả các phương tiện trên là bao nhiêu?
                                    <input type="hidden" id="stt12" name="Detail[@(countDetails+13)].Stt" value="12."/>
                                    <input type="hidden" name="Detail[@(countDetails+13)].TenCt" value="Tổng trọng tải của tất cả các phương tiện trên là bao nhiêu?"/>
                            </td>
                            <td class="text-center">Tấn
                                <input type="hidden" name="Detail[@(countDetails + 13)].Dvt" value="@(countDetails + 13) Tấn"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc12" oninput="changeThthangTruoc(12)" value="@format(Model.Detail[(countDetails+13)].ThthangTruoc)" name="Detail[@(countDetails+13)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh12" oninput="changeDuTinh(12)" value="@format(Model.Detail[(countDetails+13)].DuTinh)" name="Detail[@(countDetails+13)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>13. Cơ sở có vận chuyển hàng hóa ngoài nước không?</td>
                            <td></td>
                            <td class="text-center">
                                1. Có <input type="radio" name="chose2" id="13" />
                            </td>
                            <td class="text-center">
                                2. Không <input type="radio" name="chose2" id="13-1" />
                            </td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                14. Số vận chuyển hàng hóa trong [tháng trước] và [tháng báo
                                cáo] của cơ sở là bao nhiêu?
                                    <input type="hidden" id="stt14" name="Detail[@(countDetails+14)].Stt" value="14."/>
                                    <input type="hidden" name="Detail[@(countDetails+14)].TenCt" value="Số vận chuyển hàng hóa trong [tháng trước] và [tháng báo
                                cáo] của cơ sở là bao nhiêu?"/>
                            </td>
                            <td class="text-center">Chuyến
                                    <input type="hidden" name="Detail[@(countDetails + 14)].Dvt" value="@(countDetails + 14) Chuyến"/>
                            </td>
                            <td><input type="text" id="ThthangTruoc14" oninput="changeThthangTruoc(14)" value="@format(Model.Detail[(countDetails+14)].ThthangTruoc)" name="Detail[@(countDetails+14)].ThthangTruoc" class="infomal" /></td>
                            <td><input type="text" id="DuTinh14" oninput="changeDuTinh(14)" value="@format(Model.Detail[(countDetails+14)].DuTinh)" name="Detail[@(countDetails+14)].DuTinh" class="infomal" /></td>
                            <td></td>
                        </tr>
                        <tr class="text-left ">
                            <td>
                                14.1 Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?
                                (Hiển thị nếu câu 13=1 "CÓ")
                                    <input type="hidden" id="stt14_1" name="Detail[@(countDetails+15)].Stt" value="14.1."/>
                                    <input type="hidden" name="Detail[@(countDetails+15)].TenCt" value="Trong đó, số chuyến vận chuyển ngoài nước là bao nhiêu?"/>
                            </td>
                            <td class="text-center">Chuyến
                                <input type="hidden" name="Detail[@(countDetails + 15)].Dvt" value="@(countDetails + 15) Chuyến"/>
                            </td>

                               <td><input type="text" id="ThthangTruoc14_1" oninput="changeThthangTruoc('14_1')" value="@format(Model.Detail[(countDetails+15)].ThthangTruoc)" name="Detail[@(countDetails+15)].ThthangTruoc" class="infomal" /></td>
                               <td><input type="text" id="DuTinh14_1" oninput="changeDuTinh('14_1')" value="@format(Model.Detail[(countDetails+15)].DuTinh)" name="Detail[@(countDetails+15)].DuTinh" class="infomal" /></td>
                               <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                15. Khối lượng hàng hóa bình quân/chuyến trong [tháng trước] và
                                [tháng báo cáo] là bao nhiêu?
                                    <input type="hidden" id="stt15" name="Detail[@(countDetails+16)].Stt" value="15."/>
                                    <input type="hidden" name="Detail[@(countDetails+16)].TenCt" value="Khối lượng hàng hóa bình quân/chuyến trong [tháng trước] và
                                [tháng báo cáo] là bao nhiêu?"/>
                            </td>
                            <td class="text-center">Tấn
                                <input type="hidden" name="Detail[@(countDetails + 16)].Dvt" value="@(countDetails + 16) Tấn"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc15" oninput="changeThthangTruoc(15)" value="@format(Model.Detail[(countDetails+16)].ThthangTruoc)" name="Detail[@(countDetails+16)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh15" oninput="changeDuTinh(15)" value="@format(Model.Detail[(countDetails+16)].DuTinh)" name="Detail[@(countDetails+16)].DuTinh" class="infomal" /></td>
                                        <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                15.1 Trong đó, Khối lượng hàng hóa bình quân 1 chuyến vận chuyển
                                ngoài nước là bao nhiêu?
                                    <input type="hidden" id="stt15_1" name="Detail[@(countDetails+17)].Stt" value="15.1."/>
                                    <input type="hidden" name="Detail[@(countDetails+17)].TenCt" value="Trong đó, Khối lượng hàng hóa bình quân 1 chuyến vận chuyển
                                ngoài nước là bao nhiêu?"/>
                            </td>
                            <td class="text-center">Tấn
                                <input type="hidden" name="Detail[@(countDetails + 17)].Dvt" value="@(countDetails + 17) Tấn"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc15_1" oninput="changeThthangTruoc('15_1')" value="@format(Model.Detail[(countDetails+17)].ThthangTruoc)" name="Detail[@(countDetails+17)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh15_1" oninput="changeDuTinh('15_1')" value="@format(Model.Detail[(countDetails+17)].DuTinh)" name="Detail[@(countDetails+17)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                16. Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                hàng hóa trong [tháng trước] và [tháng báo cáo] là bao nhiêu?
                                     <input type="hidden" id="stt16" name="Detail[@(countDetails+18)].Stt" value="16."/>
                                     <input type="hidden" name="Detail[@(countDetails+18)].TenCt" value="Số km bình quân 1 chuyến mà các phương tiện có vận chuyển
                                hàng hóa trong [tháng trước] và [tháng báo cáo] là bao nhiêu?"/>
                            </td>
                            <td class="text-center">Km
                                <input type="hidden" name="Detail[@(countDetails + 18)].Dvt" value="@(countDetails + 18) km"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc16" oninput="changeThthangTruoc(16)" value="@format(Model.Detail[(countDetails+18)].ThthangTruoc)" name="Detail[@(countDetails+18)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh16" oninput="changeDuTinh(16)" value="@format(Model.Detail[(countDetails+18)].DuTinh)" name="Detail[@(countDetails+18)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>
                                16.1 Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                bao nhiêu?
                                    <input type="hidden" id="stt16_1" name="Detail[@(countDetails+19)].Stt" value="16.1."/>
                                    <input type="hidden" name="Detail[@(countDetails+19)].TenCt" value="Trong đó, số km bình quân 1 chuyến vận chuyển ngoài nước là
                                bao nhiêu?"/>
                            </td>
                            <td class="text-center">Km
                                <input type="hidden" name="Detail[@(countDetails + 19)].Dvt" value="@(countDetails + 19) km"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc16_1" oninput="changeThthangTruoc('16_1')" value="@format(Model.Detail[(countDetails+19)].ThthangTruoc)" name="Detail[@(countDetails+19)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh16_1" oninput="changeDuTinh('16_1')" value="@format(Model.Detail[(countDetails+19)].DuTinh)" name="Detail[@(countDetails+19)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>17. KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN
                                <input type="hidden" id="stt17" name="Detail[@(countDetails+20)].Stt" value="17."/>
                                <input type="hidden" name="Detail[@(countDetails+20)].TenCt" value="KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN"/>
                            </td>
                            <td class="text-center">Tấn
                                <input type="hidden" name="Detail[@(countDetails + 20)].Dvt" value="@(countDetails + 20) Tấn"/>
                            </td>
                            <td><input type="text" id="ThthangTruoc17" oninput="changeThthangTruoc(17)" value="@format(Model.Detail[(countDetails+20)].ThthangTruoc)" name="Detail[@(countDetails+20)].ThthangTruoc" class="infomal" /></td>
                            <td><input type="text" id="DuTinh17" oninput="changeDuTinh(17)" value="@format(Model.Detail[(countDetails+20)].DuTinh)" name="Detail[@(countDetails+20)].DuTinh" class="infomal" /></td>
                            <td></td>
                        </tr>
                        <tr class="text-left ">
                            <td>
                                17.1 TRONG ĐÓ, KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN NGOÀI NƯỚC (Hiển
                                thị nếu câu 13=1 "CÓ")
                                    <input type="hidden" id="stt17_1" name="Detail[@(countDetails+21)].Stt" value="17.1."/>
                                    <input type="hidden" name="Detail[@(countDetails+21)].TenCt" value="TRONG ĐÓ, KHỐI LƯỢNG HÀNG HÓA VẬN CHUYỂN NGOÀI NƯỚC"/>
                            </td>
                            <td class="text-center">Tấn
                                <input type="text" name="Detail[@(countDetails + 21)].Dvt" value="@(countDetails + 21) Tấn"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc17_1" oninput="changeThthangTruoc('17_1')" value="@format(Model.Detail[(countDetails+21)].ThthangTruoc)" name="Detail[@(countDetails+21)].ThthangTruoc" class="infomal" /></td>
                                        <td><input type="text" id="DuTinh17_1" oninput="changeDuTinh('17_1')" value="@format(Model.Detail[(countDetails+21)].DuTinh)" name="Detail[@(countDetails+21)].DuTinh" class="infomal" /></td>
                                <td></td>
                        </tr>
                        <tr class="text-left">
                            <td>18. KHỐI LƯỢNG HÀNG HÓA LUÂN CHUYỂN
                                <input type="hidden" id="stt18" name="Detail[@(countDetails+22)].Stt" value="18."/>
                                <input type="hidden" name="Detail[@(countDetails+22)].TenCt" value="KHỐI LƯỢNG HÀNG HÓA LUÂN CHUYỂN"/>
                            </td>
                            <td class="text-center">Tấn.Km
                                <input type="hidden" name="Detail[@(countDetails + 22)].Dvt" value="@(countDetails + 22) Tấn.Km"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc18" oninput="changeThthangTruoc(18)" value="@format(Model.Detail[(countDetails+22)].ThthangTruoc)" name="Detail[@(countDetails+22)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh18" oninput="changeDuTinh(18)" value="@format(Model.Detail[(countDetails+22)].DuTinh)" name="Detail[@(countDetails+22)].DuTinh" class="infomal" /></td>
                                        <td></td>
                        </tr>
                        <tr class="text-left ">
                            <td>
                                18.1 TRONG ĐÓ, KHỐI LƯỢNG LUÂN CHUYỂN NGOÀI NƯỚC (Hiển thị nếu
                                câu 13=1 "CÓ")
                                    <input type="hidden" id="stt18_1" name="Detail[@(countDetails+23)].Stt" value="18.1."/>
                                    <input type="hidden" name="Detail[@(countDetails+23)].TenCt" value="TRONG ĐÓ, KHỐI LƯỢNG LUÂN CHUYỂN NGOÀI NƯỚC"/>
                            </td>
                            <td class="text-center">Tấn.Km
                                <input type="hidden" name="Detail[@(countDetails + 23)].Dvt" value="@(countDetails + 23) Tấn.Km"/>
                            </td>
                                <td><input type="text" id="ThthangTruoc18_1" oninput="changeThthangTruoc('18_1')" value="@format(Model.Detail[(countDetails+23)].ThthangTruoc)" name="Detail[@(countDetails+23)].ThthangTruoc" class="infomal" /></td>
                                <td><input type="text" id="DuTinh18_1" oninput="changeDuTinh('18_1')" value="@format(Model.Detail[(countDetails+23)].DuTinh)" name="Detail[@(countDetails+23)].DuTinh" class="infomal" /></td>
                                        <td></td>
                        </tr>
                        countDetails++;
                    }
              </tbody>
                </table>
        <div class="form-group m-title text-center">
          <h5 style="margin-top: .5rem;"><b>C. CÁC YẾU TỔ ẢNH HƯỞNG ĐẾN HOẠT ĐỘNG KINH DOANH</b></h5>
        </div>
        <div class="form-group">
            <div class="row">
          <label
            ><b>Yếu tố nào sau đây ảnh hưởng đến hoạt động kinh doanh của đơn vị
            trong tháng @ViewBag.thang/@ViewBag.nam </b></label
          >
          </div>
          <div class="YTAH">
                    <div class="YTAH-tt">
                        @for (int ia = 0; ia < Model.DanhSachNhanToAnhHuong.Count; ia++)
                        {
                                   <label for="">@(ia + 1). @nhanToAnhHuong(@Model.DanhSachNhanToAnhHuong[ia].MaAh).NoiDungAh</label>
                        }
                    </div>
                </div>
                @if (Model.NhanToThu9 != null)
                {
                                <div class="YTAH9" style="margin-left:20px;">
                                    <label>Yếu tố khác: @Model.NhanToThu9.NoiDung</label>
                                </div>
                }
        </div>
       <div class="uname-info">
          <div class="row">
            <label class="uname-lb"><b>Họ tên người trả lời:</b></label>
            <label>@Model.Master.TenNguoiTraLoi</label>
          </div>
          <div class="row">
            <label class="uname-lb"><b>Số điện thoại:</b></label>
            <label>@Model.Master.SdtnguoiTraLoi</label>
          </div>
        </div>
<script type="text/javascript">
$('.infomal').on('blur', format);
function format(){
    if(checkNumber(this.value)){
        const value = this.value.replace(/,/g, '');
        this.value = parseFloat(value).toLocaleString('en-US', {
        style: 'decimal',
            maximumFractionDigits: 2,
            minimumFractionDigits: 2
            })
    }
}

    function changeThthangTruoc(tt){
        var tong = 0;
        for(var i = 2; i< $('#SLRow').val();i++){
            tong += getValue($('#ThangTruoc_'+i).val());
        }
        $('#ThangTruoc0').val(
            parseFloat(tong).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
            })
        );
        changeTong(tt);
    }
    function changeDuTinh(tt){
        var tong = 0;
        for(var i = 2; i< $('#SLRow').val();i++){
            tong += getValue($('#DuTinh_'+i).val());
        }
        $('#DuTinh0').val(
            parseFloat(tong).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
            })
        );
        changeTong(tt);
    }

    function changeThthangTruocTT(tt){
        var tong = 0;
        for(var i = 2; i< $('#SLRow').val();i++){
            tong += getValue($('#ThangTruocTT_'+i).val());
        }
        $('#ThangTruocTT0').val(
            parseFloat(tong).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
            })
        );
        changeTongTT(tt);
    }
    function changeDuTinhTT(tt){
        var tong = 0;
        for(var i = 2; i< $('#SLRow').val();i++){
            tong += getValue($('#DuTinhTT_'+i).val());
        }
        $('#DuTinhTT0').val(
            parseFloat(tong).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
            })
        );
        changeTongTT(tt);
    }

    function changeTong(tt){

        var stt = $('#stt_'+tt).val();        
        var mst = $('#MST1').val();
        var duTinh = $('#DuTinh_'+tt).val();
        var value = $('#ThangTruoc_'+tt).val();
        var thangDuTinh = $('#phieuThang').val();
        var nam = $('#phieuNam').val();
        $.ajax({
                type: 'POST',
                url: '/form1_1/get-tong',
                data: "mast=" + mst + "&stt="+stt+"&thangTrc="+value+"&duTinh="+duTinh+"&thangDuTinh="+thangDuTinh+"&nam="+nam,
                success: function (result) {
                    $('#TongCongDon_'+tt).val(
                        parseFloat(result).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
                    );
                    var tong = 0;
                    for(var i = 2; i< $('#SLRow').val();i++){
                        tong += getValue($('#TongCongDon_'+i).val());
                    }
                    $('#TongCongDon0').val(
                        parseFloat(tong).toLocaleString('en-US', {
                                    style: 'decimal',
                                    maximumFractionDigits: 2,
                                    minimumFractionDigits: 2
                        })
                    );
                },
               error: function (result) {
               alert('Mã số thuế không tồn tại!');
             }
            });
    }
    function changeTongTT(tt){

        var stt = $('#sttTT_'+tt).val();        
        var mst = $('#MST1').val();
        var duTinh = $('#DuTinhTT_'+tt).val();
        var value = $('#ThangTruocTT_'+tt).val();
        var thangDuTinh = $('#phieuThang').val();
        var nam = $('#phieuNam').val();
        $.ajax({
                type: 'POST',
                url: '/form1_1/get-tong',
                data: "mast=" + mst + "&stt="+stt+"&thangTrc="+value+"&duTinh="+duTinh+"&thangDuTinh="+thangDuTinh+"&nam="+nam,
                success: function (result) {
                    $('#TongCongDonTT_'+tt).val(
                        parseFloat(result).toLocaleString('en-US', {
                        style: 'decimal',
                        maximumFractionDigits: 2,
                        minimumFractionDigits: 2
                      })
                    );
                    var tong = 0;
                    for(var i = 2; i< $('#SLRow').val();i++){
                        tong += getValue($('#TongCongDonTT_'+i).val());
                    }
                    $('#TongCongDonTT0').val(
                        parseFloat(tong).toLocaleString('en-US', {
                                    style: 'decimal',
                                    maximumFractionDigits: 2,
                                    minimumFractionDigits: 2
                        })
                    );
                },
               error: function (result) {
               alert('Mã số thuế không tồn tại!');
             }
            });
    }

    function checkNumber(str) {
        return /[0-9,.\-$]+/.test(str);
    }
    function getValue(str){
       return Number(str.replace(/[^0-9.-]+/g,""));
    }

   $(".MS").keyup(function() {

        var valueArr = [];
                document.querySelectorAll('.MS').forEach(function(el){
                valueArr.push(el.value);
            });
        strMS = "";
        valueArr.forEach(AddMS)
        $('#MST1').val(strMS);
        if(strMS.length==13){
                $.ajax({
                    type: 'POST',
                    url: '/loadMaster',
                    data: "ms=" + strMS,
                    success: function (result) {
                        $('#ThongTinDoanhNghiepGroup').replaceWith(result);
                    },
                    error: function (result) {
                        alert('Mã số thuế không tồn tại!');
                    }
            });
        }
    });
    function myFunction(item, index) {
        for(var i =0 ;i<=7;i++){
                if($('#DanhSachNhanToAnhHuong_'+i).val()== item){
                    $('#DanhSachNhanToAnhHuong_'+i).prop('checked', true);
                }
        }
    }
    $(document).ready(function(){
         var a = [@Html.Raw(getArray())];
         a.forEach(myFunction);
         if($('#YT9').is(":checked")){
             $('#comment').prop('disabled', false);
         }
    });

    function doiPhieu(mst1,mst2){
        var thang = $('#phieuThang').val();
        var nam = $('#phieuNam').val();
        var s = "@Html.Raw(ViewBag.LoaiPhieu)";

        $.ajax({
                    type: 'POST',
                    url: '/changePhieu1_1',
                    data: "thang=" + thang + "&nam="+nam + "&mst1="+mst1+"&mst2="+mst2,
                    success: function (result) {
                        $('#form').replaceWith(result);
                            let kq = "@User.IsInRole("001")"
                            if(kq=="True"){
                                $('#bodyDiv').addClass("col-lg-12");
                                $('#form').addClass("form");
                                $('#tableQLTT').css("display","block");
                                $('.MS').prop('readonly', false);
                            }else{
                                $('#tableQLTT').css("display","none");
                                $('#form').addClass("form1");
                                $('.MS').prop('readonly', true);
                            }
                    },
                    error: function (result) {
                        alert('Mã số thuế không tồn tại!');
             }
          });
    }
</script>
      </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    </body>
</html>
